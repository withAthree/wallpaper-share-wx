{"version":3,"file":"lazy-load.js","sources":["uni_modules/tuniaoui-vue3/components/lazy-load/src/lazy-load.ts","uni_modules/tuniaoui-vue3/components/lazy-load/src/lazy-load.vue","../../HBuilderX/plugins/uniapp-cli-vite/uniComponent:/RDovRGV2ZWxvcG1lbnQvcHJvamVjdC93YWxscGFwZXItc2hhcmUtd3gvdW5pX21vZHVsZXMvdHVuaWFvdWktdnVlMy9jb21wb25lbnRzL2xhenktbG9hZC9zcmMvbGF6eS1sb2FkLnZ1ZQ"],"sourcesContent":["import { componentImgModes } from '../../../constants'\nimport { buildProps } from '../../../utils'\n\nimport type { ExtractPropTypes } from 'vue'\n\nexport const lazyLoadProps = buildProps({\n  /**\n   * @description 图片地址\n   */\n  src: String,\n  /**\n   * @description 图片高度\n   */\n  height: String,\n  /**\n   * @description 图片宽度\n   */\n  width: String,\n  /**\n   * @description 图片裁剪模式\n   */\n  mode: {\n    type: String,\n    values: componentImgModes,\n    default: 'aspectFill',\n  },\n  /**\n   * @description 开始加载图片的位置，单位为 px，如果设置为负数表示距离底部还有多少个像素就开始加载\n   */\n  threshold: {\n    type: Number,\n    default: 100,\n  },\n  /**\n   * @description 是否开启过度效果\n   */\n  transition: {\n    type: Boolean,\n    default: true,\n  },\n})\n\nexport const lazyLoadEmits = {\n  /**\n   * @description 图片加载完成\n   */\n  loaded: () => true,\n  /**\n   * @description 图片加载失败\n   */\n  error: () => true,\n}\n\nexport type LazyLoadProps = ExtractPropTypes<typeof lazyLoadProps>\nexport type LazyLoadEmits = typeof lazyLoadEmits\n","<script lang=\"uts\" setup>\nimport TnIcon from '../../icon/src/icon.vue'\nimport { lazyLoadEmits, lazyLoadProps } from './lazy-load'\nimport { useLazyLoad, useLazyLoadCustomStyle } from './composables'\n\nconst props = defineProps(lazyLoadProps)\ndefineEmits(lazyLoadEmits)\n\nconst {\n  componentId,\n  imageStatus,\n  showImage,\n  handleImageLoadedSuccess,\n  handleImageLoadedFailed,\n} = useLazyLoad(props)\nconst { ns, lazyLoadStyle } = useLazyLoadCustomStyle(props)\n</script>\n\n\n<script lang=\"uts\">\nexport default {\n  options: {\n    // 在微信小程序中将组件节点渲染为虚拟节点，更加接近Vue组件的表现(不会出现shadow节点下再去创建元素)\n    virtualHost: true,\n  },\n}\n</script>\n\n\n<template>\n  <view\n    :id=\"componentId\"\n    :class=\"[\n      ns.b(),\n      ns.is('show-image', showImage && imageStatus === 'loaded'),\n    ]\"\n    :style=\"lazyLoadStyle\"\n  >\n    <!-- 加载中 -->\n    <view v-if=\"imageStatus === 'loading'\" :class=\"[ns.e('container')]\">\n      <slot name=\"loading\">\n        <view :class=\"[ns.e('loading')]\">\n          <view :class=\"[ns.e('loading__icon')]\">\n            <TnIcon name=\"loading\" />\n          </view>\n        </view>\n      </slot>\n    </view>\n    <!-- 正式显示的图片 -->\n    <view\n      v-if=\"showImage && imageStatus !== 'error'\"\n      :class=\"[ns.e('container')]\"\n    >\n      <image\n        :class=\"[\n          ns.e('image'),\n          ns.is('animation', imageStatus === 'loaded' && transition),\n          ns.is('no-animation', imageStatus === 'loaded' && !transition),\n        ]\"\n        :src=\"src\"\n        :mode=\"mode\"\n        @load=\"handleImageLoadedSuccess\"\n        @error=\"handleImageLoadedFailed\"\n      />\n    </view>\n    <!-- 图片加载失败 -->\n    <view v-if=\"imageStatus === 'error'\" :class=\"[ns.e('container')]\">\n      <slot name=\"error\">\n        <view :class=\"[ns.e('error')]\">\n          <TnIcon name=\"image-fill\" />\n        </view>\n      </slot>\n    </view>\n  </view>\n</template>\n\n<style lang=\"scss\" scoped>\n@import '../../../theme-chalk/src/lazy-load.scss';\n</style>\n","import Component from 'D:/Development/project/wallpaper-share-wx/uni_modules/tuniaoui-vue3/components/lazy-load/src/lazy-load.vue'\nwx.createComponent(Component)"],"names":["buildProps","componentImgModes","useLazyLoad","useLazyLoadCustomStyle"],"mappings":";;;;;;;AAKO,MAAM,gBAAgBA,iDAAAA,WAAW;AAAA;AAAA;AAAA;AAAA,EAItC,KAAK;AAAA;AAAA;AAAA;AAAA,EAIL,QAAQ;AAAA;AAAA;AAAA;AAAA,EAIR,OAAO;AAAA;AAAA;AAAA;AAAA,EAIP,MAAM;AAAA,IACJ,MAAM;AAAA,IACN,QAAQC,2CAAiB;AAAA,IACzB,SAAS;AAAA,EACV;AAAA;AAAA;AAAA;AAAA,EAID,WAAW;AAAA,IACT,MAAM;AAAA,IACN,SAAS;AAAA,EACV;AAAA;AAAA;AAAA;AAAA,EAID,YAAY;AAAA,IACV,MAAM;AAAA,IACN,SAAS;AAAA,EACV;AACF,CAAA;AAEM,MAAM,gBAAgB;AAAA;AAAA;AAAA;AAAA,EAI3B,QAAQ,MAAA;AAAM,WAAA;AAAA,EAAI;AAAA;AAAA;AAAA;AAAA,EAIlB,OAAO,MAAA;AAAM,WAAA;AAAA,EAAI;;;;;ACjDnB,MAAO,SAAY,MAAA;AAmBnB,MAAA,cAAe,IAAA,cAAA;AAAA,EACb,SAAS,IAAA,cAAA;AAAA;AAAA,IAEP,aAAa;AAAA,GACd;AACF,CAAA;;AApBD,QAAM,QAAQ;AAGR,QAAA,KAMFC,yEAAW,YAAC,KAAK,GALnB,8BACA,8BACA,0BACA,wDACA;AAEI,QAAA,KAAwBC,mGAAuB,KAAK,GAAlD,KAAE,GAAA,IAAE,gBAAa,GAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACdzB,GAAG,gBAAgB,SAAS;"}