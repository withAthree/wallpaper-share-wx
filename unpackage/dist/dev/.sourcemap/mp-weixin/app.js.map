{"version":3,"file":"app.js","sources":["App.uvue"],"sourcesContent":["<script lang=\"uts\">\r\n\timport { setTempDir, state, setGlobalLoading } from '@/store'\r\n\timport { getLoginCode } from '/login/index.uts'\r\n\timport { login } from '/api/index.uts'\r\n\r\n\tlet firstBackTime = 0\r\n\tconst fileMgr = uni.getFileSystemManager()\r\n\r\n\texport default {\r\n\t\tonLaunch: async function () {\r\n\t\t\tuni.__f__('log','at App.uvue:11','App Launch')\r\n\r\n\t\t\twx.showShareMenu({\r\n\t\t\t\twithShareTicket: true,\r\n\t\t\t\t//设置下方的Menus菜单，才能够让发送给朋友与分享到朋友圈两个按钮可以点击\r\n\t\t\t\tmenus: [\"shareAppMessage\", \"shareTimeline\"]\r\n\t\t\t})\r\n\r\n\t\t\tsetGlobalLoading(true)\r\n\t\t\tsetTempDir(`${uni.env.USER_DATA_PATH}/wallpaperTempDirAAA`)\r\n\r\n\t\t\t// 登录\r\n\t\t\tif (!uni.getStorageSync('token')) {\r\n\t\t\t\tconst res = await getLoginCode();\r\n\t\t\t\tconst response = await login({ code: res.code })\r\n\t\t\t\tif (response.statusCode === 200) {\r\n\t\t\t\t\tuni.setStorageSync('token', response.data.token)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\ttry {\r\n\t\t\t\tfileMgr.rmdirSync(state.tempDir, true)\r\n\t\t\t} catch (err) {\r\n\t\t\t\tuni.__f__('error','at App.uvue:34','删除临时文件夹失败: ', err)\r\n\t\t\t}\r\n\r\n\t\t\t// 创建临时目录 \r\n\t\t\ttry {\r\n\t\t\t\tfileMgr.mkdirSync(state.tempDir, false)\r\n\t\t\t\tuni.__f__('log','at App.uvue:40','创建临时文件夹成功')\r\n\t\t\t} catch (err) {\r\n\t\t\t\tuni.__f__('error','at App.uvue:42',err)\r\n\t\t\t} finally {\r\n\t\t\t\tsetGlobalLoading(false)\r\n\t\t\t}\r\n\t\t},\r\n\t\tonShow: function () {\r\n\t\t\tuni.__f__('log','at App.uvue:48','App Show')\r\n\t\t},\r\n\t\tonHide: function () {\r\n\t\t\tuni.__f__('log','at App.uvue:51','App Hide')\r\n\t\t},\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t\tonExit: function () {\r\n\t\t\tuni.__f__('log','at App.uvue:72','App Exit')\r\n\t\t},\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t@import '@/uni_modules/tuniaoui-vue3/index.css';\r\n\r\n\tview {\r\n\t\tmargin: 0;\r\n\t\tpadding: 0;\r\n\t\tbox-sizing: border-box;\r\n\t}\r\n\r\n\t.tn-lazy-load,\r\n\t.tn-lazy-load__image,\r\n\t.tn-lazy-load__container,\r\n\t.tn-lazy-load__loading,\r\n\t.tn-lazy-load__error {\r\n\t\tbackground: transparent !important;\r\n\t}\r\n</style>"],"names":["uni","defineComponent","wx","setGlobalLoading","setTempDir","getLoginCode","login","state"],"mappings":";;;;;;;;;;AAMC,MAAM,UAAUA,cAAAA,MAAI;AAEpB,MAAA,YAAeC,cAAA,gBAAA,IAAA,cAAA;AAAA,EACd,UAAU,WAAA;;AACTD,oBAAAA,MAAI,MAAM,OAAM,kBAAiB,YAAY;AAE7CE,yBAAG,cAAc,IAAA,cAAA;AAAA,QAChB,iBAAiB;AAAA;AAAA,QAEjB,OAAO,CAAC,mBAAmB,eAAe;AAAA,MAC1C,CAAA,CAAA;AAEDC,kBAAgB,iBAAC,IAAI;AACrBC,kBAAU,WAAC,GAAGJ,cAAG,MAAC,IAAI,cAAc,sBAAsB;AAG1D,UAAI,CAACA,cAAG,MAAC,eAAe,OAAO,GAAG;AACjC,cAAM,MAAM,MAAMK,YAAAA;AAClB,cAAM,WAAW,MAAMC,UAAK,MAAC,IAAA,cAAA,EAAE,MAAM,IAAI,KAAM,CAAA;AAC/C,YAAI,SAAS,eAAe,KAAK;AAChCN,wBAAG,MAAC,eAAe,SAAS,SAAS,KAAK,KAAK;AAAA,QAChD;AAAA,MACD;AAEA,UAAI;AACH,gBAAQ,UAAUO,YAAAA,MAAM,SAAS,IAAI;AAAA,MACpC,SAAO,KAAK;AACbP,sBAAG,MAAC,MAAM,SAAQ,kBAAiB,eAAe,GAAG;AAAA,MACtD;AAGA,UAAI;AACH,gBAAQ,UAAUO,YAAAA,MAAM,SAAS,KAAK;AACtCP,sBAAAA,MAAI,MAAM,OAAM,kBAAiB,WAAW;AAAA,MAC3C,SAAO,KAAK;AACbA,sBAAAA,MAAI,MAAM,SAAQ,kBAAiB,GAAG;AAAA,MACvC,UAAU;AACTG,oBAAgB,iBAAC,KAAK;AAAA,MACvB;AAAA,KACA;AAAA,EAAA;AAAA,EACD,QAAQ,WAAA;AACPH,kBAAAA,MAAI,MAAM,OAAM,kBAAiB,UAAU;AAAA,EAC3C;AAAA,EACD,QAAQ,WAAA;AACPA,kBAAAA,MAAI,MAAM,OAAM,kBAAiB,UAAU;AAAA,EAC3C;AAAA,EAmBD,QAAQ,WAAA;AACPA,kBAAAA,MAAI,MAAM,OAAM,kBAAiB,UAAU;AAAA,EAC3C;CACF,CAAA;;;;;;;;;"}