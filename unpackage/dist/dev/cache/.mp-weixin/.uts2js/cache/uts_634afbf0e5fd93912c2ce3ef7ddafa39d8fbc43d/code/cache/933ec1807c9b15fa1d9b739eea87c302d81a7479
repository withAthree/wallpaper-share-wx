{"code":"import { computed, getCurrentInstance, ref, watch } from 'vue';\nimport { UPDATE_MODEL_EVENT } from '../../../../constants';\nexport const usePopup = (props) => {\n    const emit = getCurrentInstance().emit;\n    const iosDevice = computed(() => {\n        const systemInfo = uni.getSystemInfoSync();\n        return systemInfo.osName === 'ios' || systemInfo.osName === 'macos';\n    });\n    // 是否显示遮罩层\n    const showOverlay = ref(false);\n    // 是否显示弹框\n    const showPopup = ref(false);\n    const visiblePopup = ref(false);\n    let initPopupModelValue = false;\n    watch(() => { return props.modelValue; }, (value) => {\n        if (value) {\n            visiblePopup.value = true;\n            if (iosDevice.value) {\n                setTimeout(() => {\n                    showPopup.value = true;\n                    if (props.overlay)\n                        showOverlay.value = true;\n                    initPopupModelValue && emit('open');\n                }, 0);\n            }\n            else {\n                showPopup.value = true;\n                if (props.overlay)\n                    showOverlay.value = true;\n                initPopupModelValue && emit('open');\n            }\n        }\n        else {\n            showPopup.value = false;\n            showOverlay.value = false;\n            setTimeout(() => {\n                visiblePopup.value = false;\n            }, 250);\n            initPopupModelValue && emit('close');\n        }\n        initPopupModelValue = true;\n    }, {\n        immediate: true,\n    });\n    // 更新模态框的状态\n    const updateModelValue = (value) => {\n        emit(UPDATE_MODEL_EVENT, value);\n    };\n    // 点击关闭按钮\n    const onClickCloseBtn = () => {\n        updateModelValue(false);\n        emit('close');\n    };\n    // 点击遮罩层关闭模态框\n    const onClickOverlay = () => {\n        if (props.overlayCloseable) {\n            updateModelValue(false);\n            emit('close');\n            emit('overlay-click');\n        }\n    };\n    return {\n        iosDevice,\n        showOverlay,\n        showPopup,\n        visiblePopup,\n        updateModelValue,\n        onClickCloseBtn,\n        onClickOverlay,\n    };\n};\n//# sourceMappingURL=D:/Development/project/wallpaper-share-wx/uni_modules/tuniaoui-vue3/components/popup/src/composables/use-popup.js.map","references":["D:/Development/HBuilderX/plugins/uniapp-cli-vite/node_modules/@vue/runtime-core/dist/runtime-core.d.ts","D:/Development/project/wallpaper-share-wx/uni_modules/tuniaoui-vue3/constants/index.ts","D:/Development/project/wallpaper-share-wx/uni_modules/tuniaoui-vue3/components/popup/src/popup.ts"],"uniExtApis":[],"map":"{\"version\":3,\"file\":\"use-popup.js\",\"sourceRoot\":\"\",\"sources\":[\"use-popup.ts\"],\"names\":[],\"mappings\":\"AAAA,OAAO,EAAE,QAAQ,EAAE,kBAAkB,EAAE,GAAG,EAAE,KAAK,EAAE,MAAM,KAAK,CAAA;AAC9D,OAAO,EAAE,kBAAkB,EAAE,MAAM,uBAAuB,CAAA;AAI1D,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAC,KAAiB;IAChC,MAAA,IAAI,GAAK,kBAAkB,EAAG,KAA1B,CAA0B;IACtC,MAAM,SAAS,GAAG,QAAQ,CAAU;QAClC,MAAM,UAAU,GAAG,GAAG,CAAC,iBAAiB,EAAE,CAAA;QAC1C,OAAO,UAAU,CAAC,MAAM,KAAK,KAAK,IAAI,UAAU,CAAC,MAAM,KAAK,OAAO,CAAA;IACrE,CAAC,CAAC,CAAA;IAEF,UAAU;IACV,MAAM,WAAW,GAAG,GAAG,CAAC,KAAK,CAAC,CAAA;IAC9B,SAAS;IACT,MAAM,SAAS,GAAG,GAAG,CAAC,KAAK,CAAC,CAAA;IAC5B,MAAM,YAAY,GAAG,GAAG,CAAC,KAAK,CAAC,CAAA;IAC/B,IAAI,mBAAmB,GAAG,KAAK,CAAA;IAC/B,KAAK,CACH,QAAM,OAAA,KAAK,CAAC,UAAU,EAAhB,CAAgB,EACtB,CAAC,KAAK;QACJ,IAAI,KAAK,EAAE;YACT,YAAY,CAAC,KAAK,GAAG,IAAI,CAAA;YACzB,IAAI,SAAS,CAAC,KAAK,EAAE;gBACnB,UAAU,CAAC;oBACT,SAAS,CAAC,KAAK,GAAG,IAAI,CAAA;oBACtB,IAAI,KAAK,CAAC,OAAO;wBAAE,WAAW,CAAC,KAAK,GAAG,IAAI,CAAA;oBAC3C,mBAAmB,IAAI,IAAI,CAAC,MAAM,CAAC,CAAA;gBACrC,CAAC,EAAE,CAAC,CAAC,CAAA;aACN;iBAAM;gBACL,SAAS,CAAC,KAAK,GAAG,IAAI,CAAA;gBACtB,IAAI,KAAK,CAAC,OAAO;oBAAE,WAAW,CAAC,KAAK,GAAG,IAAI,CAAA;gBAC3C,mBAAmB,IAAI,IAAI,CAAC,MAAM,CAAC,CAAA;aACpC;SACF;aAAM;YACL,SAAS,CAAC,KAAK,GAAG,KAAK,CAAA;YACvB,WAAW,CAAC,KAAK,GAAG,KAAK,CAAA;YACzB,UAAU,CAAC;gBACT,YAAY,CAAC,KAAK,GAAG,KAAK,CAAA;YAC5B,CAAC,EAAE,GAAG,CAAC,CAAA;YACP,mBAAmB,IAAI,IAAI,CAAC,OAAO,CAAC,CAAA;SACrC;QACD,mBAAmB,GAAG,IAAI,CAAA;IAC5B,CAAC,EACD;QACE,SAAS,EAAE,IAAI;KAChB,CACF,CAAA;IAED,WAAW;IACX,MAAM,gBAAgB,GAAG,CAAC,KAAc;QACtC,IAAI,CAAC,kBAAkB,EAAE,KAAK,CAAC,CAAA;IACjC,CAAC,CAAA;IAED,SAAS;IACT,MAAM,eAAe,GAAG;QACtB,gBAAgB,CAAC,KAAK,CAAC,CAAA;QACvB,IAAI,CAAC,OAAO,CAAC,CAAA;IACf,CAAC,CAAA;IAED,aAAa;IACb,MAAM,cAAc,GAAG;QACrB,IAAI,KAAK,CAAC,gBAAgB,EAAE;YAC1B,gBAAgB,CAAC,KAAK,CAAC,CAAA;YACvB,IAAI,CAAC,OAAO,CAAC,CAAA;YACb,IAAI,CAAC,eAAe,CAAC,CAAA;SACtB;IACH,CAAC,CAAA;IAED,OAAO;QACL,SAAS;QACT,WAAW;QACX,SAAS;QACT,YAAY;QACZ,gBAAgB;QAChB,eAAe;QACf,cAAc;KACf,CAAA;AACH,CAAC,CAAA\"}"}
