{"version":3,"file":"index.js","sources":["uni_modules/tuniaoui-vue3/hooks/use-component-color/index.ts"],"sourcesContent":["import { ref, watch } from 'vue'\nimport type { Ref } from 'vue'\nimport type { TuniaoColorName } from '../../constants'\n\nexport type ComponentColorType = TuniaoColorName | ''\n\nexport const useComponentColor = (\n  prop: Ref<string | undefined>,\n  type: ComponentColorType = ''\n): [Ref<string>, Ref<string>, (val?: string) => void] => {\n  const classColor = ref<string>('')\n  const styleColor = ref<string>('')\n\n  // 匹配图标内置颜色类正则表达式\n  const innerColorReg = /^(tn-|gradient)/\n  // 匹配样式style值正在表达式\n  const styleColorReg =\n    /^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{8}|[A-Fa-f0-9]{3})$|^rgb\\(\\d{1,3}(,\\s?\\d{1,3}){2}\\)$|^rgba\\(\\d{1,3}(,\\s?\\d{1,3}){2},\\s?0?\\.?\\d{1,}\\)|transparent/i\n\n  // 处理传入的颜色值，判断是否为class或style\n  const handleColorValue = (value?: string) => {\n    classColor.value = ''\n    styleColor.value = ''\n    if (value === undefined) return\n    if (innerColorReg.test(value)) {\n      // 如果是背景颜色，则区分是否为渐变色\n      if (type === 'bg' && /.*gradient.*/.test(value)) {\n        // 根据__下划线分割数据\n        const gradientValue = value.split('__')[1]\n        classColor.value = `tn-gradient-bg__${gradientValue}`\n        return\n      }\n      classColor.value = `${value}_${type}`\n    }\n    if (styleColorReg.test(value)) {\n      styleColor.value = value\n    }\n  }\n  handleColorValue(prop.value)\n\n  watch(\n    () => prop.value,\n    (val) => {\n      handleColorValue(val)\n    }\n  )\n\n  // 更新颜色值和颜色类型\n  const updateColor = (value?: string) => {\n    handleColorValue(value)\n  }\n\n  return [classColor, styleColor, updateColor]\n}\n"],"names":["ref","watch"],"mappings":";;MAMa,oBAAoB,CAC/B,MACA,OAA2B,OAAE;AAE7B,QAAM,aAAaA,kBAAY,EAAE;AACjC,QAAM,aAAaA,kBAAY,EAAE;AAGjC,QAAM,gBAAgB;AAEtB,QAAM,gBACJ;AAGF,QAAM,mBAAmB,CAAC,UAAc;AACtC,eAAW,QAAQ;AACnB,eAAW,QAAQ;AACnB,QAAI,UAAU;AAAW;AACzB,QAAI,cAAc,KAAK,KAAK,GAAG;AAE7B,UAAI,SAAS,QAAQ,eAAe,KAAK,KAAK,GAAG;AAE/C,cAAM,gBAAgB,MAAM,MAAM,IAAI,EAAE,CAAC;AACzC,mBAAW,QAAQ,mBAAmB,aAAa;AACnD;AAAA,MACD;AACD,iBAAW,QAAQ,GAAG,KAAK,IAAI,IAAI;AAAA,IACpC;AACD,QAAI,cAAc,KAAK,KAAK,GAAG;AAC7B,iBAAW,QAAQ;AAAA,IACpB;AAAA,EACH;AACA,mBAAiB,KAAK,KAAK;AAE3BC,gBAAK,MACH,MAAM;AAAA,WAAA,KAAK;AAAA,EAAL,GACN,CAAC,QAAG;AACF,qBAAiB,GAAG;AAAA,EACtB,CAAC;AAIH,QAAM,cAAc,CAAC,UAAc;AACjC,qBAAiB,KAAK;AAAA,EACxB;AAEA,SAAO,CAAC,YAAY,YAAY,WAAW;AAC7C;;"}