{"code":"import { __awaiter } from \"tslib\";\nimport { computed, getCurrentInstance, inject, nextTick, onMounted, ref, } from 'vue';\nimport { collapseContextKey } from '../../../../tokens';\nimport { useSelectorQuery } from '../../../../hooks';\nimport { debugWarn, generateId, isEmptyVariableInDefault, } from '../../../../utils';\nexport const useCollapseItem = (props) => {\n    const instance = getCurrentInstance();\n    if (!instance) {\n        debugWarn('TnCollapseItem', '请在 setup 函数中使用 TnCollapseItem');\n    }\n    const uid = instance.uid;\n    const collapse = inject(collapseContextKey);\n    if (!collapse) {\n        debugWarn('TnCollapseItem', '请在 TnCollapse 中使用 TnCollapseItem');\n    }\n    collapse === null || collapse === void 0 ? void 0 : collapse.addItem({ uid });\n    const componentContentId = `tcic-${generateId()}`;\n    const getSelectorNodeInfo = useSelectorQuery(instance).getSelectorNodeInfo;\n    // 当前组件是否为激活状态\n    const isActive = computed(() => {\n        if (!collapse)\n            return false;\n        return collapse.activeUid.includes(uid);\n    });\n    // 是否显示折叠面板箭头\n    const showArrow = computed(() => {\n        return isEmptyVariableInDefault(collapse === null || collapse === void 0 ? void 0 : collapse.showArrow, false);\n    });\n    // 组件内容的高度\n    const compoenntContentDefaultHeight = ref(0);\n    const componentTitleHeight = ref(uni.upx2px(100));\n    const componentHeight = computed(() => {\n        if (!isActive.value)\n            return `${componentTitleHeight.value}px`;\n        else\n            return `${componentTitleHeight.value + compoenntContentDefaultHeight.value}px`;\n    });\n    let initCount = 0;\n    // 获取内容容器高度\n    const getComponentContentHeight = () => { return __awaiter(void 0, void 0, void 0, function* () {\n        try {\n            const rectInfo = yield getSelectorNodeInfo(`#${componentContentId}`);\n            initCount = 0;\n            compoenntContentDefaultHeight.value = rectInfo.height || 0;\n        }\n        catch (err) {\n            if (initCount > 10) {\n                initCount = 0;\n                debugWarn('TnCollapseItem', `获取内容高度失败: ${err}`);\n                return;\n            }\n            initCount++;\n            setTimeout(() => {\n                getComponentContentHeight();\n            }, 150);\n        }\n    }); };\n    // CollapseItem 点击事件\n    const collapseItemClick = () => {\n        if (props.disabled)\n            return;\n        collapse === null || collapse === void 0 ? void 0 : collapse.handleItemClick(uid);\n    };\n    onMounted(() => {\n        nextTick(() => {\n            getComponentContentHeight();\n        });\n    });\n    return {\n        componentContentId,\n        showArrow,\n        isActive,\n        componentHeight,\n        collapseItemClick,\n    };\n};\n//# sourceMappingURL=D:/Development/project/wallpaper-share-wx/uni_modules/tuniaoui-vue3/components/collapse/src/composables/use-collapse-item.js.map","references":["D:/Development/HBuilderX/plugins/uniapp-cli-vite/node_modules/@vue/runtime-core/dist/runtime-core.d.ts","D:/Development/project/wallpaper-share-wx/uni_modules/tuniaoui-vue3/tokens/index.ts","D:/Development/project/wallpaper-share-wx/uni_modules/tuniaoui-vue3/hooks/index.ts","D:/Development/project/wallpaper-share-wx/uni_modules/tuniaoui-vue3/utils/index.ts","D:/Development/project/wallpaper-share-wx/uni_modules/tuniaoui-vue3/components/collapse/src/collapse-item.ts"],"uniExtApis":[],"map":"{\"version\":3,\"file\":\"use-collapse-item.js\",\"sourceRoot\":\"\",\"sources\":[\"use-collapse-item.ts\"],\"names\":[],\"mappings\":\";AAAA,OAAO,EACL,QAAQ,EACR,kBAAkB,EAClB,MAAM,EACN,QAAQ,EACR,SAAS,EACT,GAAG,GACJ,MAAM,KAAK,CAAA;AACZ,OAAO,EAAE,kBAAkB,EAAE,MAAM,oBAAoB,CAAA;AACvD,OAAO,EAAE,gBAAgB,EAAE,MAAM,mBAAmB,CAAA;AACpD,OAAO,EACL,SAAS,EACT,UAAU,EACV,wBAAwB,GACzB,MAAM,mBAAmB,CAAA;AAI1B,MAAM,CAAC,MAAM,eAAe,GAAG,CAAC,KAAwB;IACtD,MAAM,QAAQ,GAAG,kBAAkB,EAAE,CAAA;IACrC,IAAI,CAAC,QAAQ,EAAE;QACb,SAAS,CAAC,gBAAgB,EAAE,+BAA+B,CAAC,CAAA;KAC7D;IACO,MAAA,GAAG,GAAK,QAAS,IAAd,CAAc;IAEzB,MAAM,QAAQ,GAAG,MAAM,CAAC,kBAAkB,CAAC,CAAA;IAC3C,IAAI,CAAC,QAAQ,EAAE;QACb,SAAS,CAAC,gBAAgB,EAAE,kCAAkC,CAAC,CAAA;KAChE;IAED,QAAQ,aAAR,QAAQ,uBAAR,QAAQ,CAAE,OAAO,CAAC,EAAE,GAAG,EAAE,CAAC,CAAA;IAE1B,MAAM,kBAAkB,GAAG,QAAQ,UAAU,EAAE,EAAE,CAAA;IACzC,MAAA,mBAAmB,GAAK,gBAAgB,CAAC,QAAQ,CAAC,oBAA/B,CAA+B;IAE1D,cAAc;IACd,MAAM,QAAQ,GAAG,QAAQ,CAAU;QACjC,IAAI,CAAC,QAAQ;YAAE,OAAO,KAAK,CAAA;QAC3B,OAAO,QAAQ,CAAC,SAAS,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAA;IACzC,CAAC,CAAC,CAAA;IAEF,aAAa;IACb,MAAM,SAAS,GAAG,QAAQ,CAAU;QAClC,OAAA,wBAAwB,CAAC,QAAQ,aAAR,QAAQ,uBAAR,QAAQ,CAAE,SAAS,EAAE,KAAK,CAAC;IAApD,CAAoD,CACrD,CAAA;IAED,UAAU;IACV,MAAM,6BAA6B,GAAG,GAAG,CAAS,CAAC,CAAC,CAAA;IACpD,MAAM,oBAAoB,GAAG,GAAG,CAAS,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAA;IACzD,MAAM,eAAe,GAAG,QAAQ,CAAS;QACvC,IAAI,CAAC,QAAQ,CAAC,KAAK;YAAE,OAAO,GAAG,oBAAoB,CAAC,KAAK,IAAI,CAAA;;YAE3D,OAAO,GACL,oBAAoB,CAAC,KAAK,GAAG,6BAA6B,CAAC,KAC7D,IAAI,CAAA;IACR,CAAC,CAAC,CAAA;IAEF,IAAI,SAAS,GAAG,CAAC,CAAA;IACjB,WAAW;IACX,MAAM,yBAAyB,GAAG;QAChC,IAAI;YACF,MAAM,QAAQ,GAAG,MAAM,mBAAmB,CAAC,IAAI,kBAAkB,EAAE,CAAC,CAAA;YAEpE,SAAS,GAAG,CAAC,CAAA;YACb,6BAA6B,CAAC,KAAK,GAAG,QAAQ,CAAC,MAAM,IAAI,CAAC,CAAA;SAC3D;QAAC,OAAO,GAAG,EAAE;YACZ,IAAI,SAAS,GAAG,EAAE,EAAE;gBAClB,SAAS,GAAG,CAAC,CAAA;gBACb,SAAS,CAAC,gBAAgB,EAAE,aAAa,GAAG,EAAE,CAAC,CAAA;gBAC/C,OAAM;aACP;YACD,SAAS,EAAE,CAAA;YACX,UAAU,CAAC;gBACT,yBAAyB,EAAE,CAAA;YAC7B,CAAC,EAAE,GAAG,CAAC,CAAA;SACR;IACH,CAAC,IAAA,CAAA;IAED,oBAAoB;IACpB,MAAM,iBAAiB,GAAG;QACxB,IAAI,KAAK,CAAC,QAAQ;YAAE,OAAM;QAC1B,QAAQ,aAAR,QAAQ,uBAAR,QAAQ,CAAE,eAAe,CAAC,GAAG,CAAC,CAAA;IAChC,CAAC,CAAA;IAED,SAAS,CAAC;QACR,QAAQ,CAAC;YACP,yBAAyB,EAAE,CAAA;QAC7B,CAAC,CAAC,CAAA;IACJ,CAAC,CAAC,CAAA;IAEF,OAAO;QACL,kBAAkB;QAClB,SAAS;QACT,QAAQ;QACR,eAAe;QACf,iBAAiB;KAClB,CAAA;AACH,CAAC,CAAA\"}"}
