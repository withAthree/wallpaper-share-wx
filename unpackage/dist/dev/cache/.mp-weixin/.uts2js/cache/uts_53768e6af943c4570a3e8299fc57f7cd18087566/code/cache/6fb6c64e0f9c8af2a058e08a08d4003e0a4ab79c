{"code":"import { getCurrentInstance, provide, reactive, ref, toRefs, watch } from 'vue';\nimport { stepsContextKey } from '../../../../tokens';\nimport { CHANGE_EVENT, UPDATE_MODEL_EVENT } from '../../../../constants';\nimport { useOrderedChildren } from '../../../../hooks';\nimport { debugWarn } from '../../../../utils';\nexport const useSteps = (props) => {\n    const instance = getCurrentInstance();\n    if (!instance) {\n        debugWarn('TnSteps', '请在 setup 中使用 useSteps');\n    }\n    const emit = instance.emit;\n    const _a = useOrderedChildren(), items = _a.children, addChild = _a.addChild, removeItem = _a.removeChild;\n    // 当前已激活的Uid列表\n    const activeUidList = ref([]);\n    let innerUpdate = false;\n    // 更新当前激活的Uid列表\n    const setActiveUidList = (uid, changeEmit = false) => {\n        if (uid === undefined) {\n            activeUidList.value = [];\n            return;\n        }\n        // 查找出当前激活的uid的index\n        const index = items.value.findIndex((item) => { return item.uid === uid; });\n        if (index === -1)\n            return;\n        // 根据index查找出当前激活的uid列表\n        activeUidList.value = items.value\n            .slice(0, index + 1)\n            .map((item) => { return item.uid; });\n        // 触发更新事件\n        emit(UPDATE_MODEL_EVENT, index);\n        if (changeEmit) {\n            emit(CHANGE_EVENT, index);\n        }\n    };\n    // 设置当前激活的Step\n    const setActiveItem = (uid) => {\n        if (props.disabled)\n            return;\n        innerUpdate = true;\n        setActiveUidList(uid, true);\n    };\n    watch(() => { return props.modelValue; }, (val) => {\n        var _a, _b;\n        if (innerUpdate) {\n            innerUpdate = false;\n            return;\n        }\n        if (val !== undefined) {\n            const uid = (_b = (_a = items.value) === null || _a === void 0 ? void 0 : _a[val]) === null || _b === void 0 ? void 0 : _b.uid;\n            setActiveUidList(uid);\n        }\n    });\n    // 添加item到items\n    const addItem = (item) => {\n        var _a, _b;\n        addChild(item);\n        if (!activeUidList.value.length &&\n            props.modelValue !== undefined &&\n            props.modelValue >= 0) {\n            setActiveUidList((_b = (_a = items.value) === null || _a === void 0 ? void 0 : _a[props.modelValue]) === null || _b === void 0 ? void 0 : _b.uid);\n        }\n    };\n    provide(stepsContextKey, reactive(Object.assign(Object.assign({}, toRefs(props)), { items,\n        activeUidList,\n        addItem,\n        removeItem,\n        setActiveItem })));\n};\n//# sourceMappingURL=D:/DEV/Project/wallpaper-share-wx/uni_modules/tuniaoui-vue3/components/steps/src/composables/use-steps.js.map","references":["D:/DEV/HBuilderX/plugins/uniapp-cli-vite/node_modules/@vue/runtime-core/dist/runtime-core.d.ts","D:/DEV/Project/wallpaper-share-wx/uni_modules/tuniaoui-vue3/tokens/index.ts","D:/DEV/Project/wallpaper-share-wx/uni_modules/tuniaoui-vue3/constants/index.ts","D:/DEV/Project/wallpaper-share-wx/uni_modules/tuniaoui-vue3/hooks/index.ts","D:/DEV/Project/wallpaper-share-wx/uni_modules/tuniaoui-vue3/utils/index.ts","D:/DEV/Project/wallpaper-share-wx/uni_modules/tuniaoui-vue3/components/steps/src/steps.ts","D:/DEV/Project/wallpaper-share-wx/uni_modules/tuniaoui-vue3/tokens/index.ts"],"uniExtApis":[],"map":"{\"version\":3,\"file\":\"use-steps.js\",\"sourceRoot\":\"\",\"sources\":[\"use-steps.ts\"],\"names\":[],\"mappings\":\"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\"}"}
