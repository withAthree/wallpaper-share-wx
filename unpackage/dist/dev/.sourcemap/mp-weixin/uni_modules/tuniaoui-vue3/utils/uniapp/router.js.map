{"version":3,"file":"router.js","sources":["uni_modules/tuniaoui-vue3/utils/uniapp/router.ts"],"sourcesContent":["import { debugWarn } from '../error'\nimport { isEmptyVariableInDefault } from '../is-empty'\n\ntype navType = 'navigateTo' | 'redirectTo' | 'reLaunch' | 'switchTab'\n\n/**\n * 返回上一页\n * @param indexUrl 首页地址\n * @param delta 返回的页面数，如果 delta 大于现有页面数，则返回到首页\n */\nexport function tnNavBack(indexUrl?: string, delta = 1) {\n  const indexPageUrl = isEmptyVariableInDefault(indexUrl, '/pages/index/index')\n  // 通过判断当前页面的页面栈信息，是否有上一页进行返回，如果没有则跳转到首页\n  const pages = getCurrentPages()\n  if (pages?.length) {\n    const firstPage = pages[0]\n    if (\n      pages.length === 1 &&\n      (!firstPage.route || firstPage?.route != indexPageUrl)\n    ) {\n      return tnNavPage(indexPageUrl, 'reLaunch')\n    } else {\n      uni.navigateBack({\n        delta,\n      })\n      return Promise.resolve()\n    }\n  } else {\n    return tnNavPage(indexPageUrl, 'reLaunch')\n  }\n}\n\n/**\n * 跳转到指定页面\n * @param url 页面地址\n * @param type 跳转类型\n */\nexport function tnNavPage(url: string, type: navType = 'navigateTo') {\n  function handelNavFail(err: any) {\n    debugWarn('tnNavPage', `跳转页面失败: ${err}`)\n  }\n  return new Promise<void>((resolve, reject) => {\n    switch (type) {\n      case 'navigateTo':\n        uni.navigateTo({\n          url,\n          success: () => {\n            resolve()\n          },\n          fail: (err) => {\n            handelNavFail(err)\n            reject(err)\n          },\n        })\n        break\n      case 'redirectTo':\n        uni.redirectTo({\n          url,\n          success: () => {\n            resolve()\n          },\n          fail: (err) => {\n            handelNavFail(err)\n            reject(err)\n          },\n        })\n        break\n      case 'reLaunch':\n        uni.reLaunch({\n          url,\n          success: () => {\n            resolve()\n          },\n          fail: (err) => {\n            handelNavFail(err)\n            reject(err)\n          },\n        })\n        break\n      case 'switchTab':\n        uni.switchTab({\n          url,\n          success: () => {\n            resolve()\n          },\n          fail: (err) => {\n            handelNavFail(err)\n            reject(err)\n          },\n        })\n    }\n  })\n}\n"],"names":["isEmptyVariableInDefault","uni","debugWarn"],"mappings":";;;;SAUgB,UAAU,UAAmB,QAAQ,GAAC;AACpD,QAAM,eAAeA,uCAAAA,yBAAyB,UAAU,oBAAoB;AAE5E,QAAM,QAAQ;AACd,MAAI,UAAA,QAAA,4BAAA,MAAO,QAAQ;AACjB,UAAM,YAAY,MAAM,CAAC;AACzB,QACE,MAAM,WAAW,MAChB,CAAC,UAAU,UAAS,cAAS,QAAT,cAAS,SAAA,SAAT,UAAW,UAAS,eACzC;AACA,aAAO,UAAU,cAAc,UAAU;AAAA,IAC1C,OAAM;AACLC,oBAAAA,MAAI,aAAa;AAAA,QACf;AAAA,MACD,CAAA;AACD,aAAO,QAAQ;IAChB;AAAA,EACF,OAAM;AACL,WAAO,UAAU,cAAc,UAAU;AAAA,EAC1C;AACH;SAOgB,UAAU,KAAa,OAAgB,cAAY;AACjE,WAAS,cAAc,KAAQ;AAC7BC,yCAAAA,UAAU,aAAa,WAAW,GAAG,EAAE;AAAA,EACxC;AACD,SAAO,IAAI,QAAc,CAAC,SAAS,WAAM;AACvC,YAAQ,MAAI;AAAA,MACV,KAAK;AACHD,sBAAAA,MAAI,WAAW;AAAA,UACb;AAAA,UACA,SAAS,MAAA;AACP;UACD;AAAA,UACD,MAAM,CAAC,QAAG;AACR,0BAAc,GAAG;AACjB,mBAAO,GAAG;AAAA,UACX;AAAA,QACF,CAAA;AACD;AAAA,MACF,KAAK;AACHA,sBAAAA,MAAI,WAAW;AAAA,UACb;AAAA,UACA,SAAS,MAAA;AACP;UACD;AAAA,UACD,MAAM,CAAC,QAAG;AACR,0BAAc,GAAG;AACjB,mBAAO,GAAG;AAAA,UACX;AAAA,QACF,CAAA;AACD;AAAA,MACF,KAAK;AACHA,sBAAAA,MAAI,SAAS;AAAA,UACX;AAAA,UACA,SAAS,MAAA;AACP;UACD;AAAA,UACD,MAAM,CAAC,QAAG;AACR,0BAAc,GAAG;AACjB,mBAAO,GAAG;AAAA,UACX;AAAA,QACF,CAAA;AACD;AAAA,MACF,KAAK;AACHA,sBAAAA,MAAI,UAAU;AAAA,UACZ;AAAA,UACA,SAAS,MAAA;AACP;UACD;AAAA,UACD,MAAM,CAAC,QAAG;AACR,0BAAc,GAAG;AACjB,mBAAO,GAAG;AAAA,UACX;AAAA,QACF,CAAA;AAAA,IACJ;AAAA,EACH,CAAC;AACH;;;"}