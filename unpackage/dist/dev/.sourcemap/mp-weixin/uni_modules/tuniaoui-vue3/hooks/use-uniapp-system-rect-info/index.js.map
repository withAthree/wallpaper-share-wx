{"version":3,"file":"index.js","sources":["uni_modules/tuniaoui-vue3/hooks/use-uniapp-system-rect-info/index.ts"],"sourcesContent":["import { reactive } from 'vue'\nimport { debugWarn } from '../../utils'\n\nexport interface NavBarInfo {\n  height: number\n  statusHeight: number\n}\n\nexport interface NavbarBoundingInfo {\n  width: number\n  height: number\n  top: number\n  right: number\n  bottom: number\n  left: number\n  marginRight: number\n}\n\nexport interface SystemScreenInfo {\n  width: number\n  height: number\n  operationHeight: number\n}\n\n// 默认状态栏高度\nconst DEFAULT_STATUS_BAR_HEIGHT = 45\n// 默认胶囊的宽度\nconst DEFAULT_NAVBAR_BOUNDING_WIDTH = 87\n// 默认胶囊的高度\nconst DEFAULT_NAVBAR_BOUNDING_HEIGHT = 32\n// 默认胶囊的右边距\nconst DEFAULT_NAVBAR_BOUNDING_RIGHT = 7\n// 默认胶囊的上边距\nconst DEFAULT_NAVBAR_BOUNDING_TOP = 4\n\nexport const useUniAppSystemRectInfo = () => {\n  // 状态栏信息\n  const navBarInfo = reactive<NavBarInfo>({\n    height: 0,\n    statusHeight: DEFAULT_STATUS_BAR_HEIGHT,\n  })\n\n  // 状态栏胶囊信息\n  const navBarBoundingInfo = reactive<NavbarBoundingInfo>({\n    width: 0,\n    height: 32,\n    top: 0,\n    right: 0,\n    bottom: 0,\n    left: 0,\n    marginRight: 0,\n  })\n\n  // 系统屏幕信息\n  const systemScreenInfo = reactive<SystemScreenInfo>({\n    width: 0,\n    height: 0,\n    operationHeight: 0,\n  })\n\n  const getSystemRectInfo = () => {\n    try {\n      const uniSystemInfo = uni.getSystemInfoSync()\n      const { statusBarHeight, windowWidth, windowHeight, titleBarHeight } =\n        uniSystemInfo\n\n      let height = 0\n      // #ifndef MP\n      height = (statusBarHeight || 0) + DEFAULT_STATUS_BAR_HEIGHT\n      navBarBoundingInfo.width = DEFAULT_NAVBAR_BOUNDING_WIDTH\n      navBarBoundingInfo.height = DEFAULT_NAVBAR_BOUNDING_HEIGHT\n      navBarBoundingInfo.right = windowWidth - DEFAULT_NAVBAR_BOUNDING_RIGHT\n      navBarBoundingInfo.left =\n        windowWidth -\n        DEFAULT_NAVBAR_BOUNDING_RIGHT -\n        DEFAULT_NAVBAR_BOUNDING_WIDTH\n      navBarBoundingInfo.top = DEFAULT_NAVBAR_BOUNDING_TOP\n      navBarBoundingInfo.bottom =\n        DEFAULT_NAVBAR_BOUNDING_TOP + DEFAULT_NAVBAR_BOUNDING_HEIGHT\n      navBarBoundingInfo.marginRight = DEFAULT_NAVBAR_BOUNDING_RIGHT\n      // #endif\n      // #ifdef MP-WEIXIN || MP-ALIPAY || MP-BAIDU || MP_TOUTIAO || MP-QQ\n      const {\n        width: menuButtonWidth,\n        height: menuButtonHeight,\n        bottom: menuButtonBottom,\n        top: menuButtonTop,\n        left: menuButtonLeft,\n        right: menuButtonRight,\n      } = uni.getMenuButtonBoundingClientRect()\n      navBarBoundingInfo.width = menuButtonWidth\n      navBarBoundingInfo.height = menuButtonHeight + 2\n      navBarBoundingInfo.bottom = menuButtonBottom\n      navBarBoundingInfo.top = menuButtonTop\n      navBarBoundingInfo.left = menuButtonLeft\n      navBarBoundingInfo.right = menuButtonRight\n      // #ifdef MP-ALIPAY\n      navBarBoundingInfo.right = menuButtonLeft + menuButtonWidth\n      // #endif\n      navBarBoundingInfo.marginRight = windowWidth - navBarBoundingInfo.right\n\n      // 防止导航栏内容区域太靠近底部\n      // 菜单胶囊按钮距离顶部的高度\n      const menuButtonMarginTopHeight = menuButtonTop - statusBarHeight!\n      height =\n        menuButtonBottom +\n        (menuButtonMarginTopHeight < 4 ? 4 : menuButtonMarginTopHeight)\n      // #endif\n      // #ifdef MP-ALIPAY\n      const { optionMenuLeft } = uni.getMenuButtonBoundingClientRect()\n      height = statusBarHeight! + titleBarHeight!\n      if (optionMenuLeft) {\n        navBarBoundingInfo.left = optionMenuLeft\n      }\n      // #endif\n\n      navBarInfo.height = height\n      navBarInfo.statusHeight = statusBarHeight!\n\n      systemScreenInfo.width = windowWidth\n      systemScreenInfo.height = windowHeight\n      systemScreenInfo.operationHeight = windowHeight - height\n    } catch (err) {\n      debugWarn(\n        'useUniAppSystemRectInfo',\n        `[TnGetSystemRectInfo]获取系统容器信息失败: ${err}`\n      )\n    }\n  }\n  getSystemRectInfo()\n\n  return {\n    navBarInfo,\n    navBarBoundingInfo,\n    systemScreenInfo,\n    getSystemRectInfo,\n  }\n}\n"],"names":["reactive","uni","debugWarn"],"mappings":";;;;AAyBA,MAAM,4BAA4B;AAUrB,MAAA,0BAA0B,MAAA;AAErC,QAAM,aAAaA,cAAAA,SAAqB;AAAA,IACtC,QAAQ;AAAA,IACR,cAAc;AAAA,EACf,CAAA;AAGD,QAAM,qBAAqBA,cAAAA,SAA6B;AAAA,IACtD,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,KAAK;AAAA,IACL,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,MAAM;AAAA,IACN,aAAa;AAAA,EACd,CAAA;AAGD,QAAM,mBAAmBA,cAAAA,SAA2B;AAAA,IAClD,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,iBAAiB;AAAA,EAClB,CAAA;AAED,QAAM,oBAAoB,MAAA;AACxB,QAAI;AACF,YAAM,gBAAgBC,oBAAI;AAClB,YAAA,kBACN,+BADuB,cACvB,cAAa,aADuB,eACpC,cADgD,cAAE,iBAClD;AAEF,UAAI,SAAS;AAgBP,YAAA,KAOFA,oBAAI,mCANC,kBAAe,GAAA,OACd,mBAAgB,GAAA,QAChB,mBAAgB,GAAA,QACnB,gBAAa,GAAA,KACZ,iBAAc,GAAA,MACb,kBAAe,GAAA;AAExB,yBAAmB,QAAQ;AAC3B,yBAAmB,SAAS,mBAAmB;AAC/C,yBAAmB,SAAS;AAC5B,yBAAmB,MAAM;AACzB,yBAAmB,OAAO;AAC1B,yBAAmB,QAAQ;AAI3B,yBAAmB,cAAc,cAAc,mBAAmB;AAIlE,YAAM,4BAA4B,gBAAgB;AAClD,eACE,oBACC,4BAA4B,IAAI,IAAI;AAUvC,iBAAW,SAAS;AACpB,iBAAW,eAAe;AAE1B,uBAAiB,QAAQ;AACzB,uBAAiB,SAAS;AAC1B,uBAAiB,kBAAkB,eAAe;AAAA,IACnD,SAAQ,KAAK;AACZC,2CAAAA,UACE,2BACA,oCAAoC,GAAG,EAAE;AAAA,IAE5C;AAAA,EACH;AACA;AAEA,SAAO;AAAA,IACL;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA;AAEJ;;"}