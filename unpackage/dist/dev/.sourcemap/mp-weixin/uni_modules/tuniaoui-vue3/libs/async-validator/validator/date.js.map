{"version":3,"file":"date.js","sources":["uni_modules/tuniaoui-vue3/libs/async-validator/validator/date.ts"],"sourcesContent":["import type { ExecuteValidator } from '../interface';\nimport rules from '../rule';\nimport { isEmptyValue } from '../util';\n\nconst date: ExecuteValidator = (rule, value, callback, source, options) => {\n  // console.log('integer rule called %j', rule);\n  const errors: string[] = [];\n  const validate =\n    rule.required || (!rule.required && source.hasOwnProperty(rule.field));\n  // console.log('validate on %s value', value);\n  if (validate) {\n    if (isEmptyValue(value, 'date') && !rule.required) {\n      return callback();\n    }\n    rules.required(rule, value, source, errors, options);\n    if (!isEmptyValue(value, 'date')) {\n      let dateObject;\n\n      if (value instanceof Date) {\n        dateObject = value;\n      } else {\n        dateObject = new Date(value);\n      }\n\n      rules.type(rule, dateObject, source, errors, options);\n      if (dateObject) {\n        rules.range(rule, dateObject.getTime(), source, errors, options);\n      }\n    }\n  }\n  callback(errors);\n};\n\nexport default date;\n"],"names":["isEmptyValue","rules"],"mappings":";;;AAIM,MAAA,OAAyB,CAAC,MAAM,OAAO,UAAU,QAAQ,YAAO;AAEpE,QAAM,SAAmB,CAAA;AACzB,QAAM,WACJ,KAAK,YAAa,CAAC,KAAK,YAAY,OAAO,eAAe,KAAK,KAAK;AAEtE,MAAI,UAAU;AACZ,QAAIA,kDAAAA,aAAa,OAAO,MAAM,KAAK,CAAC,KAAK,UAAU;AACjD,aAAO,SAAQ;AAAA,IAChB;AACDC,4DAAK,MAAC,SAAS,MAAM,OAAO,QAAQ,QAAQ,OAAO;AACnD,QAAI,CAACD,kDAAY,aAAC,OAAO,MAAM,GAAG;AAChC,UAAI;AAEJ,UAAI,iBAAiB,MAAM;AACzB,qBAAa;AAAA,MACd,OAAM;AACL,qBAAa,IAAI,KAAK,KAAK;AAAA,MAC5B;AAEDC,8DAAK,MAAC,KAAK,MAAM,YAAY,QAAQ,QAAQ,OAAO;AACpD,UAAI,YAAY;AACdA,sEAAM,MAAM,MAAM,WAAW,QAAO,GAAI,QAAQ,QAAQ,OAAO;AAAA,MAChE;AAAA,IACF;AAAA,EACF;AACD,WAAS,MAAM;AACjB;;"}