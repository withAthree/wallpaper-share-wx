{"code":"import { __awaiter } from \"tslib\";\nimport { computed, getCurrentInstance, inject, nextTick, onMounted, onUnmounted, } from 'vue';\nimport { tabsContextKey } from '../../../../tokens';\nimport { useSelectorQuery } from '../../../../hooks';\nimport { debugWarn, generateId, isEmpty } from '../../../../utils';\nexport const useTabsItem = (props) => {\n    const instance = getCurrentInstance();\n    if (!instance) {\n        debugWarn('TnTabsItem', '请在 setup 中使用 useTabsItem');\n    }\n    const _a = instance, emit = _a.emit, uid = _a.uid;\n    const componentId = `tti-${generateId()}`;\n    const tabsContext = inject(tabsContextKey);\n    const getSelectorNodeInfo = useSelectorQuery(instance).getSelectorNodeInfo;\n    // 当前节点是否被激活\n    const isActive = computed(() => { return (tabsContext === null || tabsContext === void 0 ? void 0 : tabsContext.activeUid) === uid; });\n    // 判断是否有角标\n    const hasBadge = computed(() => { return !isEmpty(props.badgeConfig); });\n    // tabsItem节点信息\n    const tabsItemRect = {\n        width: 0,\n        height: 0,\n        left: 0,\n    };\n    let initCount = 0;\n    // 初始化、获取节点信息\n    const initTabsItemRectInfo = () => { return __awaiter(void 0, void 0, void 0, function* () {\n        try {\n            const rectInfo = yield getSelectorNodeInfo(`#${componentId}`);\n            tabsItemRect.width = rectInfo.width || 0;\n            tabsItemRect.height = rectInfo.height || 0;\n            tabsItemRect.left = rectInfo.left || 0;\n            // 添加item\n            tabsContext === null || tabsContext === void 0 ? void 0 : tabsContext.addItem({\n                uid,\n                elementRect: tabsItemRect,\n                name: props.name,\n            });\n        }\n        catch (err) {\n            if (initCount > 10) {\n                initCount = 0;\n                debugWarn('TnTabsItem', `获取tabsItem节点信息失败: ${err}`);\n                return;\n            }\n            initCount++;\n            setTimeout(() => {\n                initTabsItemRectInfo();\n            }, 150);\n        }\n    }); };\n    // item点击事件\n    const itemClickEvent = () => {\n        if (props.disabled)\n            return;\n        emit('click');\n        tabsContext === null || tabsContext === void 0 ? void 0 : tabsContext.setActiveItem(uid);\n    };\n    onMounted(() => {\n        nextTick(() => {\n            // 初始化节点\n            setTimeout(() => {\n                initTabsItemRectInfo();\n            }, 200);\n        });\n    });\n    onUnmounted(() => {\n        // 移除item\n        tabsContext === null || tabsContext === void 0 ? void 0 : tabsContext.removeItem(uid);\n    });\n    return {\n        componentId,\n        isActive,\n        hasBadge,\n        itemClickEvent,\n    };\n};\n//# sourceMappingURL=D:/DEV/Project/wallpaper-share-wx/uni_modules/tuniaoui-vue3/components/tabs/src/composables/use-tabs-item.js.map","references":["D:/DEV/HBuilderX/plugins/uniapp-cli-vite/node_modules/@vue/runtime-core/dist/runtime-core.d.ts","D:/DEV/Project/wallpaper-share-wx/uni_modules/tuniaoui-vue3/tokens/index.ts","D:/DEV/Project/wallpaper-share-wx/uni_modules/tuniaoui-vue3/hooks/index.ts","D:/DEV/Project/wallpaper-share-wx/uni_modules/tuniaoui-vue3/utils/index.ts","D:/DEV/Project/wallpaper-share-wx/uni_modules/tuniaoui-vue3/components/tabs/src/tabs-item.ts","D:/DEV/Project/wallpaper-share-wx/uni_modules/tuniaoui-vue3/components/tabs/src/types.ts"],"uniExtApis":[],"map":"{\"version\":3,\"file\":\"use-tabs-item.js\",\"sourceRoot\":\"\",\"sources\":[\"use-tabs-item.ts\"],\"names\":[],\"mappings\":\"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\"}"}
