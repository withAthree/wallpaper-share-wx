{"version":3,"file":"input-custom.js","sources":["uni_modules/tuniaoui-vue3/components/input/src/composables/input-custom.ts"],"sourcesContent":["import { computed, toRef } from 'vue'\nimport { useFormSize } from '../../../form'\nimport { useComponentColor, useNamespace } from '../../../../hooks'\nimport { formatDomSizeValue, isEmpty } from '../../../../utils'\n\nimport type { CSSProperties, Ref } from 'vue'\nimport type { InputProps } from '../input'\nimport type { FormItemValidateStates } from '../../../form'\n\nexport const useInputCustomStyle = (\n  props: InputProps,\n  validateState: Ref<FormItemValidateStates>,\n  disabled: Ref<boolean>\n) => {\n  const ns = useNamespace('input')\n\n  // 输入框的尺寸\n  const inputSize = useFormSize(props.size)\n\n  // 解析边框颜色\n  const [borderColorClass, borderColorStyle] = useComponentColor(\n    toRef(props, 'borderColor'),\n    'border'\n  )\n\n  // 解析字数统计颜色\n  const [wordLimitColorClass, wordLimitColorStyle] = useComponentColor(\n    toRef(props, 'wordLimitColor'),\n    'text'\n  )\n\n  // 输入框placeholder样式\n  const placeholderStyle = computed<string>(() => {\n    const style: CSSProperties = {\n      color: 'var(--tn-text-color-secondary)',\n    }\n\n    if (!isEmpty(props.placeholderStyle))\n      Object.assign(style, props.placeholderStyle)\n\n    return Object.entries(style)\n      .map(([key, value]) => `${key}:${value}`)\n      .join(';')\n  })\n\n  // 输入框所属类\n  const inputClass = computed<string>(() => {\n    const cls: string[] = [ns.b()]\n\n    // 禁止输入\n    if (disabled.value && props.type !== 'select') cls.push(ns.m('disabled'))\n\n    // 设置边框尺寸\n    if (inputSize.value) cls.push(ns.m(inputSize.value))\n\n    // 设置文字对齐方式\n    if (props.textAlign) cls.push(ns.m(`text-${props.textAlign}`))\n\n    // 是否发生错误\n    if (validateState.value === 'error') cls.push(ns.m('error'))\n\n    // 设置边框\n    if (props.border || props.underline || validateState.value === 'error') {\n      cls.push(props.underline ? 'tn-border-bottom' : 'tn-border')\n      if (validateState.value === 'error') cls.push('tn-red_border')\n      else if (borderColorClass.value) cls.push(borderColorClass.value)\n    }\n\n    if (props.underline) {\n      cls.push(ns.m('underline'))\n    }\n\n    if (props.customClass) cls.push(props.customClass)\n\n    return cls.join(' ')\n  })\n\n  // 输入框样式\n  const inputStyle = computed<CSSProperties>(() => {\n    const style: CSSProperties = {}\n\n    // 设置高度\n    if (props.height) style.height = formatDomSizeValue(props.height)\n\n    // 设置边框颜色\n    if (\n      props.border &&\n      borderColorStyle.value &&\n      validateState.value !== 'error'\n    )\n      style.borderColor = borderColorStyle.value\n\n    if (!isEmpty(props.customStyle)) Object.assign(style, props.customStyle)\n\n    return style\n  })\n\n  // 字数统计类\n  const wordLimitClass = computed<string>(() => {\n    const cls: string[] = [ns.e('word-limit')]\n\n    if (wordLimitColorClass.value) cls.push(wordLimitColorClass.value)\n\n    return cls.join(' ')\n  })\n  // 字数统计样式\n  const wordLimitStyle = computed<CSSProperties>(() => {\n    const style: CSSProperties = {}\n\n    if (!wordLimitColorClass.value) {\n      style.color = wordLimitColorStyle.value || 'var(--tn-color-gray)'\n    }\n\n    return style\n  })\n\n  return {\n    ns,\n    inputClass,\n    inputStyle,\n    placeholderStyle,\n    wordLimitClass,\n    wordLimitStyle,\n  }\n}\n"],"names":["useNamespace","useFormSize","__read","useComponentColor","toRef","computed","isEmpty","_a","_b","formatDomSizeValue"],"mappings":";;;;;;;;;;MASa,sBAAsB,CACjC,OACA,eACA,aAAsB;AAEtB,QAAM,KAAKA,+DAAa,OAAO;AAG/B,QAAM,YAAYC,4EAAAA,YAAY,MAAM,IAAI;AAGlC,QAAA,KAAAC,cAAAA,OAAuCC,uDAAiB,kBAC5DC,cAAK,MAAC,OAAO,aAAa,GAC1B,QAAQ,OAFH,0BAAkB;AAMnB,QAAA,KAAAF,cAAAA,OAA6CC,uDAAiB,kBAClEC,cAAK,MAAC,OAAO,gBAAgB,GAC7B,MAAM,OAFD,6BAAqB;AAM5B,QAAM,mBAAmBC,cAAAA,SAAiB,MAAA;AACxC,UAAM,QAAuB;AAAA,MAC3B,OAAO;AAAA;AAGT,QAAI,CAACC,qCAAAA,QAAQ,MAAM,gBAAgB;AACjC,aAAO,OAAO,OAAO,MAAM,gBAAgB;AAE7C,WAAO,OAAO,QAAQ,KAAK,EACxB,IAAI,CAACC,QAAY;AAAZ,UAAAC,MAAAN,cAAAA,gBAAC,MAAGM,IAAA,CAAA,GAAE,QAAKA,IAAA,CAAA;AAAM,aAAA,GAAG,GAAG,IAAI,KAAK;AAAA,IAAf,CAAiB,EACvC,KAAK,GAAG;AAAA,EACb,CAAC;AAGD,QAAM,aAAaH,cAAAA,SAAiB,MAAA;AAClC,UAAM,MAAgB,CAAC,GAAG,EAAG,CAAA;AAG7B,QAAI,SAAS,SAAS,MAAM,SAAS;AAAU,UAAI,KAAK,GAAG,EAAE,UAAU,CAAC;AAGxE,QAAI,UAAU;AAAO,UAAI,KAAK,GAAG,EAAE,UAAU,KAAK,CAAC;AAGnD,QAAI,MAAM;AAAW,UAAI,KAAK,GAAG,EAAE,QAAQ,MAAM,SAAS,EAAE,CAAC;AAG7D,QAAI,cAAc,UAAU;AAAS,UAAI,KAAK,GAAG,EAAE,OAAO,CAAC;AAG3D,QAAI,MAAM,UAAU,MAAM,aAAa,cAAc,UAAU,SAAS;AACtE,UAAI,KAAK,MAAM,YAAY,qBAAqB,WAAW;AAC3D,UAAI,cAAc,UAAU;AAAS,YAAI,KAAK,eAAe;AAAA,eACpD,iBAAiB;AAAO,YAAI,KAAK,iBAAiB,KAAK;AAAA,IACjE;AAED,QAAI,MAAM,WAAW;AACnB,UAAI,KAAK,GAAG,EAAE,WAAW,CAAC;AAAA,IAC3B;AAED,QAAI,MAAM;AAAa,UAAI,KAAK,MAAM,WAAW;AAEjD,WAAO,IAAI,KAAK,GAAG;AAAA,EACrB,CAAC;AAGD,QAAM,aAAaA,cAAAA,SAAwB,MAAA;AACzC,UAAM,QAAuB,CAAA;AAG7B,QAAI,MAAM;AAAQ,YAAM,SAASI,wCAAAA,mBAAmB,MAAM,MAAM;AAGhE,QACE,MAAM,UACN,iBAAiB,SACjB,cAAc,UAAU;AAExB,YAAM,cAAc,iBAAiB;AAEvC,QAAI,CAACH,qCAAAA,QAAQ,MAAM,WAAW;AAAG,aAAO,OAAO,OAAO,MAAM,WAAW;AAEvE,WAAO;AAAA,EACT,CAAC;AAGD,QAAM,iBAAiBD,cAAAA,SAAiB,MAAA;AACtC,UAAM,MAAgB,CAAC,GAAG,EAAE,YAAY,CAAC;AAEzC,QAAI,oBAAoB;AAAO,UAAI,KAAK,oBAAoB,KAAK;AAEjE,WAAO,IAAI,KAAK,GAAG;AAAA,EACrB,CAAC;AAED,QAAM,iBAAiBA,cAAAA,SAAwB,MAAA;AAC7C,UAAM,QAAuB,CAAA;AAE7B,QAAI,CAAC,oBAAoB,OAAO;AAC9B,YAAM,QAAQ,oBAAoB,SAAS;AAAA,IAC5C;AAED,WAAO;AAAA,EACT,CAAC;AAED,SAAO;AAAA,IACL;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA;AAEJ;;"}