{"code":"import { computed, ref, watch } from 'vue';\nimport { isEmptyVariableInDefault } from '../../../../utils';\nexport const useCountTo = (props, emits) => {\n    // 开始值\n    const startValue = computed(() => {\n        return Number(isEmptyVariableInDefault(props.start, 0));\n    });\n    // 结束值\n    const endValue = computed(() => {\n        return Number(isEmptyVariableInDefault(props.end, 0));\n    });\n    // 判断是往下计数还是往上计数\n    const countDown = computed(() => { return startValue.value > endValue.value; });\n    // 动画执行时间\n    const duration = computed(() => {\n        return isEmptyVariableInDefault(props.duration, 1500);\n    });\n    // 待显示的内容\n    const content = ref('');\n    // 格式化需要显示的内容\n    const _formatContent = (value) => {\n        const throusandNumberReg = /(\\d+)(\\d{3})/;\n        const valueStr = value.toFixed(props.decimals);\n        const valueArr = valueStr.split('.');\n        let firestValue = valueArr[0];\n        let secondValue = '';\n        if (valueArr.length > 1) {\n            secondValue = `${isEmptyVariableInDefault(props.decimalSeparator, '.')}${valueArr[1]}`;\n        }\n        if (props === null || props === void 0 ? void 0 : props.thousandsSeparator) {\n            while (throusandNumberReg.test(firestValue)) {\n                firestValue = firestValue.replace(throusandNumberReg, `$1${props.thousandsSeparator}$2`);\n            }\n        }\n        return `${firestValue}${secondValue}`;\n    };\n    // 计算缓动动画时间函数\n    function _easeOutCubic(t, b, c, d) {\n        return (c * (-Math.pow(2, (-10 * t) / d) + 1) * 1024) / 1023 + b;\n    }\n    /* 数值动画操作 start */\n    // 动画执行开始时间\n    let startTime = null;\n    // 开始执行动画\n    const countToAnimation = () => {\n        if (!startTime)\n            startTime = Date.now();\n        const elapsed = Date.now() - startTime;\n        let currentValue = 0;\n        if (countDown.value) {\n            currentValue =\n                startValue.value -\n                    _easeOutCubic(elapsed, 0, startValue.value - endValue.value, duration.value);\n            currentValue =\n                currentValue < endValue.value ? endValue.value : currentValue;\n        }\n        else {\n            currentValue = _easeOutCubic(elapsed, startValue.value, endValue.value - startValue.value, duration.value);\n            currentValue =\n                currentValue > endValue.value ? endValue.value : currentValue;\n        }\n        content.value = _formatContent(currentValue);\n        if (elapsed < duration.value) {\n            // 使用settimeout来模拟requestAnimationFrame\n            setTimeout(countToAnimation, 16);\n        }\n        else {\n            // 动画执行结束\n            emits('end');\n        }\n    };\n    /* 数值动画操作 end */\n    // 监听endValue和startValue的变化\n    watch([endValue, startValue], () => {\n        startTime = null;\n        countToAnimation();\n    }, {\n        immediate: true,\n    });\n    return {\n        content,\n    };\n};\n//# sourceMappingURL=D:/DEV/Project/wallpaper-share-wx/uni_modules/tuniaoui-vue3/components/count-to/src/composables/use-count-to.js.map","references":["D:/DEV/HBuilderX/plugins/uniapp-cli-vite/node_modules/@vue/runtime-core/dist/runtime-core.d.ts","D:/DEV/Project/wallpaper-share-wx/uni_modules/tuniaoui-vue3/utils/index.ts","D:/DEV/HBuilderX/plugins/uniapp-cli-vite/node_modules/@vue/runtime-core/dist/runtime-core.d.ts","D:/DEV/Project/wallpaper-share-wx/uni_modules/tuniaoui-vue3/components/count-to/src/count-to.ts"],"uniExtApis":[],"map":"{\"version\":3,\"file\":\"use-count-to.js\",\"sourceRoot\":\"\",\"sources\":[\"use-count-to.ts\"],\"names\":[],\"mappings\":\"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\"}"}
