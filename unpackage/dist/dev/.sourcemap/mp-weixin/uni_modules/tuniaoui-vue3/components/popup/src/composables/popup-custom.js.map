{"version":3,"file":"popup-custom.js","sources":["uni_modules/tuniaoui-vue3/components/popup/src/composables/popup-custom.ts"],"sourcesContent":["import { computed, toRef } from 'vue'\nimport { useComponentColor, useNamespace } from '../../../../hooks'\nimport { formatDomSizeValue } from '../../../../utils'\n\nimport type { CSSProperties } from 'vue'\nimport type { PopupProps } from '../popup'\n\nexport const usePopupCustomStyle = (props: PopupProps) => {\n  const ns = useNamespace('popup')\n\n  // 当前模态框的zIndex\n  const zIndex = computed(() => Number(props.zIndex))\n\n  // 遮罩层的zIndex\n  const overlayZIndex = computed(() => zIndex.value - 1)\n\n  // 内容背景颜色\n  const [contentBgColorClass, contentBgColorStyle] = useComponentColor(\n    toRef(props, 'bgColor'),\n    'bg'\n  )\n\n  // 内容所属类\n  const popupContentClass = computed<string>(() => {\n    const cls: string[] = [ns.e('content')]\n\n    // 内容弹出位置\n    if (props.openDirection) cls.push(ns.em('content', props.openDirection))\n\n    // 如果是底部弹出，是否开启安全区域\n    if (props.openDirection === 'bottom' && props.safeAreaInsetBottom) {\n      cls.push('tn-u-safe-area')\n    }\n\n    // 内容背景颜色\n    if (contentBgColorClass.value) cls.push(contentBgColorClass.value)\n\n    return cls.join(' ')\n  })\n\n  // 内容所属样式\n  const popupContentStyle = computed<CSSProperties>(() => {\n    const style: CSSProperties = {}\n\n    // 设置背景颜色\n    if (contentBgColorStyle.value)\n      style.backgroundColor = contentBgColorStyle.value\n\n    // 设置圆角\n    if (props.radius) {\n      // 如果有设置圆角则条件overflow:hidden\n      style.overflow = 'hidden'\n      // 根据不同的弹出位置设置圆角\n      if (props.openDirection === 'center') {\n        style.borderRadius = formatDomSizeValue(props.radius)\n      }\n      if (props.openDirection === 'top') {\n        style.borderBottomLeftRadius = formatDomSizeValue(props.radius)\n        style.borderBottomRightRadius = formatDomSizeValue(props.radius)\n      }\n      if (props.openDirection === 'left') {\n        style.borderTopRightRadius = formatDomSizeValue(props.radius)\n        style.borderBottomRightRadius = formatDomSizeValue(props.radius)\n      }\n      if (props.openDirection === 'right') {\n        style.borderTopLeftRadius = formatDomSizeValue(props.radius)\n        style.borderBottomLeftRadius = formatDomSizeValue(props.radius)\n      }\n      if (props.openDirection === 'bottom') {\n        style.borderTopLeftRadius = formatDomSizeValue(props.radius)\n        style.borderTopRightRadius = formatDomSizeValue(props.radius)\n      }\n    }\n\n    // 设置距离顶部的距离\n    if (\n      props.top &&\n      (props.openDirection === 'top' ||\n        props.openDirection === 'left' ||\n        props.openDirection === 'right')\n    ) {\n      style.top = formatDomSizeValue(props.top, 'px')\n    }\n\n    // 根据不同的位置设置不同的宽度或高度\n    if (\n      props.width &&\n      (props.openDirection === 'left' ||\n        props.openDirection === 'right' ||\n        props.openDirection === 'center')\n    ) {\n      style.width = formatDomSizeValue(props.width)\n    }\n    if (\n      props.height &&\n      (props.openDirection === 'top' ||\n        props.openDirection === 'bottom' ||\n        props.openDirection === 'center')\n    ) {\n      style.height = formatDomSizeValue(props.height)\n    }\n\n    if (props.openDirection === 'left' || props.openDirection === 'right') {\n      if (props.top)\n        style.height = `calc(100% - ${formatDomSizeValue(props.top, 'px')})`\n    }\n\n    // 设置zIndex\n    style.zIndex = zIndex.value\n\n    return style\n  })\n\n  return {\n    ns,\n    zIndex,\n    overlayZIndex,\n    popupContentClass,\n    popupContentStyle,\n  }\n}\n"],"names":["useNamespace","computed","__read","useComponentColor","toRef","formatDomSizeValue"],"mappings":";;;;;;;AAOO,MAAM,sBAAsB,CAAC,UAAiB;AACnD,QAAM,KAAKA,+DAAa,OAAO;AAG/B,QAAM,SAASC,cAAQ,SAAC;AAAM,WAAA,OAAO,MAAM,MAAM;AAAA,EAAnB,CAAoB;AAGlD,QAAM,gBAAgBA,cAAQ,SAAC;AAAM,WAAA,OAAO,QAAQ;AAAA,EAAf,CAAgB;AAG/C,QAAA,KAAAC,cAAAA,OAA6CC,uDAAiB,kBAClEC,cAAK,MAAC,OAAO,SAAS,GACtB,IAAI,OAFC,6BAAqB;AAM5B,QAAM,oBAAoBH,cAAAA,SAAiB,MAAA;AACzC,UAAM,MAAgB,CAAC,GAAG,EAAE,SAAS,CAAC;AAGtC,QAAI,MAAM;AAAe,UAAI,KAAK,GAAG,GAAG,WAAW,MAAM,aAAa,CAAC;AAGvE,QAAI,MAAM,kBAAkB,YAAY,MAAM,qBAAqB;AACjE,UAAI,KAAK,gBAAgB;AAAA,IAC1B;AAGD,QAAI,oBAAoB;AAAO,UAAI,KAAK,oBAAoB,KAAK;AAEjE,WAAO,IAAI,KAAK,GAAG;AAAA,EACrB,CAAC;AAGD,QAAM,oBAAoBA,cAAAA,SAAwB,MAAA;AAChD,UAAM,QAAuB,CAAA;AAG7B,QAAI,oBAAoB;AACtB,YAAM,kBAAkB,oBAAoB;AAG9C,QAAI,MAAM,QAAQ;AAEhB,YAAM,WAAW;AAEjB,UAAI,MAAM,kBAAkB,UAAU;AACpC,cAAM,eAAeI,wCAAAA,mBAAmB,MAAM,MAAM;AAAA,MACrD;AACD,UAAI,MAAM,kBAAkB,OAAO;AACjC,cAAM,yBAAyBA,wCAAAA,mBAAmB,MAAM,MAAM;AAC9D,cAAM,0BAA0BA,wCAAAA,mBAAmB,MAAM,MAAM;AAAA,MAChE;AACD,UAAI,MAAM,kBAAkB,QAAQ;AAClC,cAAM,uBAAuBA,wCAAAA,mBAAmB,MAAM,MAAM;AAC5D,cAAM,0BAA0BA,wCAAAA,mBAAmB,MAAM,MAAM;AAAA,MAChE;AACD,UAAI,MAAM,kBAAkB,SAAS;AACnC,cAAM,sBAAsBA,wCAAAA,mBAAmB,MAAM,MAAM;AAC3D,cAAM,yBAAyBA,wCAAAA,mBAAmB,MAAM,MAAM;AAAA,MAC/D;AACD,UAAI,MAAM,kBAAkB,UAAU;AACpC,cAAM,sBAAsBA,wCAAAA,mBAAmB,MAAM,MAAM;AAC3D,cAAM,uBAAuBA,wCAAAA,mBAAmB,MAAM,MAAM;AAAA,MAC7D;AAAA,IACF;AAGD,QACE,MAAM,QACL,MAAM,kBAAkB,SACvB,MAAM,kBAAkB,UACxB,MAAM,kBAAkB,UAC1B;AACA,YAAM,MAAMA,wCAAkB,mBAAC,MAAM,KAAK,IAAI;AAAA,IAC/C;AAGD,QACE,MAAM,UACL,MAAM,kBAAkB,UACvB,MAAM,kBAAkB,WACxB,MAAM,kBAAkB,WAC1B;AACA,YAAM,QAAQA,wCAAAA,mBAAmB,MAAM,KAAK;AAAA,IAC7C;AACD,QACE,MAAM,WACL,MAAM,kBAAkB,SACvB,MAAM,kBAAkB,YACxB,MAAM,kBAAkB,WAC1B;AACA,YAAM,SAASA,wCAAAA,mBAAmB,MAAM,MAAM;AAAA,IAC/C;AAED,QAAI,MAAM,kBAAkB,UAAU,MAAM,kBAAkB,SAAS;AACrE,UAAI,MAAM;AACR,cAAM,SAAS,eAAeA,wCAAkB,mBAAC,MAAM,KAAK,IAAI,CAAC;AAAA,IACpE;AAGD,UAAM,SAAS,OAAO;AAEtB,WAAO;AAAA,EACT,CAAC;AAED,SAAO;AAAA,IACL;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA;AAEJ;;"}