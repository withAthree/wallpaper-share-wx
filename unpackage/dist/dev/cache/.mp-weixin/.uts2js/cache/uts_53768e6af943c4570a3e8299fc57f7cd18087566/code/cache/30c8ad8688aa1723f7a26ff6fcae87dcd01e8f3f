{"code":"import { ref, watch } from 'vue';\nimport { formatNumber } from '../../../../utils';\nconst SECOND = 1;\nconst MINUTE = 60 * SECOND;\nconst HOUR = 60 * MINUTE;\nconst DAY = 24 * HOUR;\nexport const useCountDown = (props, emits) => {\n    // 当前倒计时时间\n    let time = 0;\n    // 时间定义\n    const day = ref('');\n    const hour = ref('');\n    const minute = ref('');\n    const second = ref('');\n    // 将时间戳转换为对应的时间\n    const splitCountDownData = () => {\n        const showDay = props.showDay, showHour = props.showHour, showMinute = props.showMinute, showSecond = props.showSecond, autoHideDay = props.autoHideDay;\n        const _day = Math.floor(time / DAY);\n        // 如果不显示天数则将天的时间加到小时上，后面的分钟和秒如此累加\n        const _hour = showDay\n            ? Math.floor((time % DAY) / HOUR)\n            : Math.floor(time / HOUR);\n        const _minute = Math.floor((time % HOUR) / MINUTE);\n        const _second = Math.floor(time % MINUTE);\n        // 判断是否自动隐藏天数\n        if (!showDay || (autoHideDay && _day === 0))\n            day.value = '';\n        else\n            day.value = formatNumber(_day, 4);\n        hour.value = showHour ? formatNumber(_hour, 4) : '';\n        minute.value = showMinute ? formatNumber(_minute) : '';\n        second.value = showSecond ? formatNumber(_second) : '';\n    };\n    // 倒计时定时器\n    let countDownTimer = null;\n    // 开始倒计时\n    const startCountDown = () => {\n        // 如果倒计时时间为0，重新设置倒计时时间\n        if (time <= 0)\n            time = props.time;\n        else {\n            // 先渲染一次\n            time--;\n        }\n        // 先停止之前的倒计时\n        stopCountDown();\n        emits('start');\n        // 开始倒计时\n        countDownTimer = setInterval(() => {\n            if (time < 0) {\n                stopCountDown();\n                emits('end');\n                return;\n            }\n            splitCountDownData();\n            time--;\n        }, 1000);\n    };\n    // 停止倒计时\n    const stopCountDown = () => {\n        if (countDownTimer) {\n            clearInterval(countDownTimer);\n            countDownTimer = null;\n        }\n    };\n    // 重置定时器\n    const resetCountDown = () => {\n        stopCountDown();\n        time = props.time;\n        splitCountDownData();\n    };\n    watch(() => { return props.time; }, (_time) => {\n        resetCountDown();\n        // 自动开始倒计时\n        if (props.autoStart && _time > 0) {\n            startCountDown();\n        }\n    }, {\n        immediate: true,\n    });\n    return {\n        day,\n        hour,\n        minute,\n        second,\n        startCountDown,\n        stopCountDown,\n        resetCountDown,\n    };\n};\n//# sourceMappingURL=D:/DEV/Project/wallpaper-share-wx/uni_modules/tuniaoui-vue3/components/count-down/src/composables/use-count-down.js.map","references":["D:/DEV/HBuilderX/plugins/uniapp-cli-vite/node_modules/@vue/runtime-core/dist/runtime-core.d.ts","D:/DEV/Project/wallpaper-share-wx/uni_modules/tuniaoui-vue3/utils/index.ts","D:/DEV/HBuilderX/plugins/uniapp-cli-vite/node_modules/@vue/runtime-core/dist/runtime-core.d.ts","D:/DEV/Project/wallpaper-share-wx/uni_modules/tuniaoui-vue3/components/count-down/src/count-down.ts"],"uniExtApis":[],"map":"{\"version\":3,\"file\":\"use-count-down.js\",\"sourceRoot\":\"\",\"sources\":[\"use-count-down.ts\"],\"names\":[],\"mappings\":\"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\"}"}
