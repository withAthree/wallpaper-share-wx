{"version":3,"file":"form-item-custom.js","sources":["uni_modules/tuniaoui-vue3/components/form/src/composables/form-item-custom.ts"],"sourcesContent":["import { computed, inject, ref } from 'vue'\nimport { formContextKey } from '../../../../tokens'\nimport { formatDomSizeValue, generateId } from '../../../../utils'\nimport { useNamespace, useSelectorQuery } from '../../../../hooks'\nimport { useFormSize } from './use-form-common-props'\n\nimport type { CSSProperties, Ref } from 'vue'\nimport type { FormItemProps } from '../form-item'\n\nexport const useFormItemCustomStyle = (\n  props: FormItemProps,\n  hasLabel: Ref<boolean>,\n  isRequired: Ref<boolean>\n) => {\n  const form = inject(formContextKey, undefined)\n\n  const ns = useNamespace('form-item')\n\n  const size = useFormSize(undefined, { formItem: false })\n\n  const { getSelectorNodeInfo } = useSelectorQuery()\n\n  // 标签的宽度\n  const labelWidth = computed(() =>\n    formatDomSizeValue(props.labelWidth || form?.labelWidth || '')\n  )\n\n  // 标签的位置\n  const labelPosition = computed(\n    () => props.labelPosition || form?.labelPosition || 'right'\n  )\n\n  // 是否隐藏必填星号\n  const hideRequiredAsterisk = computed(\n    () => form?.hideRequiredAsterisk || false\n  )\n\n  // 必填星号的位置\n  const requireAsteriskPosition = computed(\n    () => form?.requireAsteriskPosition || 'left'\n  )\n\n  // label标签容器宽度\n  const labelContainerWidth = ref(0)\n  const labelId = `label-${generateId()}`\n\n  // 获取label标签的宽度\n  const initLabelContainerWidth = () => {\n    if (!hasLabel.value) return\n    getSelectorNodeInfo(`#${labelId}`).then((res) => {\n      labelContainerWidth.value = res?.width || 0\n    })\n  }\n\n  // formItem所属类\n  const formItemClass = computed<string>(() => {\n    const cls: string[] = [ns.b()]\n\n    if (size.value) cls.push(ns.m(size.value))\n\n    if (labelPosition.value) cls.push(ns.m(`label-${labelPosition.value}`))\n\n    return cls.join(' ')\n  })\n\n  // formItemLabel所属类\n  const formItemLabelClass = computed<string>(() => {\n    const cls: string[] = [ns.e('label')]\n    if (!hideRequiredAsterisk.value && isRequired.value) {\n      cls.push(\n        ns.em('label', 'required'),\n        ns.em('label', `asterisk-${requireAsteriskPosition.value}`)\n      )\n    }\n    return cls.join(' ')\n  })\n\n  // formItemLabel所属样式\n  const formItemLabelStyle = computed<CSSProperties>(() => {\n    const style: CSSProperties = {}\n    if (labelPosition.value !== 'top' && labelWidth.value)\n      style.width = labelWidth.value\n    return style\n  })\n\n  // formItemErrorMessage所属样式\n  const formItemErrorMessageStyle = computed<CSSProperties>(() => {\n    const style: CSSProperties = {}\n    if (labelPosition.value !== 'top' && hasLabel.value) {\n      style.paddingLeft = `${labelContainerWidth.value}px`\n    }\n    return style\n  })\n\n  return {\n    ns,\n    labelId,\n    formItemClass,\n    formItemLabelClass,\n    formItemLabelStyle,\n    formItemErrorMessageStyle,\n    initLabelContainerWidth,\n  }\n}\n"],"names":["inject","formContextKey","useNamespace","useFormSize","useSelectorQuery","computed","formatDomSizeValue","ref","generateId"],"mappings":";;;;;;;;;;MASa,yBAAyB,CACpC,OACA,UACA,eAAwB;AAExB,QAAM,OAAOA,cAAAA,OAAOC,qCAAc,gBAAE,MAAS;AAE7C,QAAM,KAAKC,+DAAa,WAAW;AAEnC,QAAM,OAAOC,4EAAAA,YAAY,QAAW,EAAE,UAAU,MAAK,CAAE;AAE/C,QAAA,sBAAwBC,uEAAkB;AAGlD,QAAM,aAAaC,cAAAA,SAAS,MAAA;AAC1B,WAAAC,wCAAkB,mBAAC,MAAM,eAAc,SAAI,QAAJ,SAAI,SAAA,SAAJ,KAAM,eAAc,EAAE;AAAA,EAA7D,CAA8D;AAIhE,QAAM,gBAAgBD,cAAAA,SACpB;AAAM,WAAA,MAAM,kBAAiB,iBAAA,SAAI,SAAA,SAAJ,KAAM,kBAAiB;AAAA,EAAO,CAAA;AAI7D,QAAM,uBAAuBA,cAAAA,SAC3B,MAAM;AAAA,YAAA,SAAI,QAAJ,SAAA,SAAA,SAAA,KAAM,yBAAwB;AAAA,EAA9B,CAAmC;AAI3C,QAAM,0BAA0BA,cAAAA,SAC9B,MAAM;AAAA,YAAA,SAAI,QAAJ,SAAA,SAAA,SAAA,KAAM,4BAA2B;AAAA,EAAjC,CAAuC;AAI/C,QAAM,sBAAsBE,kBAAI,CAAC;AACjC,QAAM,UAAU,SAASC,oCAAU,WAAA,CAAE;AAGrC,QAAM,0BAA0B,MAAA;AAC9B,QAAI,CAAC,SAAS;AAAO;AACrB,wBAAoB,IAAI,OAAO,EAAE,EAAE,KAAK,CAAC,QAAG;AAC1C,0BAAoB,SAAQ,QAAG,QAAH,QAAG,SAAA,SAAH,IAAK,UAAS;AAAA,IAC5C,CAAC;AAAA,EACH;AAGA,QAAM,gBAAgBH,cAAAA,SAAiB,MAAA;AACrC,UAAM,MAAgB,CAAC,GAAG,EAAG,CAAA;AAE7B,QAAI,KAAK;AAAO,UAAI,KAAK,GAAG,EAAE,KAAK,KAAK,CAAC;AAEzC,QAAI,cAAc;AAAO,UAAI,KAAK,GAAG,EAAE,SAAS,cAAc,KAAK,EAAE,CAAC;AAEtE,WAAO,IAAI,KAAK,GAAG;AAAA,EACrB,CAAC;AAGD,QAAM,qBAAqBA,cAAAA,SAAiB,MAAA;AAC1C,UAAM,MAAgB,CAAC,GAAG,EAAE,OAAO,CAAC;AACpC,QAAI,CAAC,qBAAqB,SAAS,WAAW,OAAO;AACnD,UAAI,KACF,GAAG,GAAG,SAAS,UAAU,GACzB,GAAG,GAAG,SAAS,YAAY,wBAAwB,KAAK,EAAE,CAAC;AAAA,IAE9D;AACD,WAAO,IAAI,KAAK,GAAG;AAAA,EACrB,CAAC;AAGD,QAAM,qBAAqBA,cAAAA,SAAwB,MAAA;AACjD,UAAM,QAAuB,CAAA;AAC7B,QAAI,cAAc,UAAU,SAAS,WAAW;AAC9C,YAAM,QAAQ,WAAW;AAC3B,WAAO;AAAA,EACT,CAAC;AAGD,QAAM,4BAA4BA,cAAAA,SAAwB,MAAA;AACxD,UAAM,QAAuB,CAAA;AAC7B,QAAI,cAAc,UAAU,SAAS,SAAS,OAAO;AACnD,YAAM,cAAc,GAAG,oBAAoB,KAAK;AAAA,IACjD;AACD,WAAO;AAAA,EACT,CAAC;AAED,SAAO;AAAA,IACL;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA;AAEJ;;"}