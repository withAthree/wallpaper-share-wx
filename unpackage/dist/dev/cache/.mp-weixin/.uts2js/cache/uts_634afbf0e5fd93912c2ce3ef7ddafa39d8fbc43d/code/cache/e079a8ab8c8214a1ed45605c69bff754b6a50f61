{"code":"import { __read } from \"tslib\";\nimport { computed, nextTick, ref, watch } from 'vue';\nimport { trim } from '../../../../libs/lodash';\nimport { CHANGE_EVENT, INPUT_EVENT, UPDATE_MODEL_EVENT, } from '../../../../constants';\nimport { FormValidateIconsMap, debugWarn, isEmptyVariableInDefault, } from '../../../../utils';\nimport { useToggle } from '../../../../hooks';\nimport { useFormDisabled, useFormItem } from '../../../form';\nexport const useInput = (props, emits) => {\n    const _a = useFormItem(), form = _a.form, formItem = _a.formItem;\n    // 输入框内容\n    const inputText = ref(String(isEmptyVariableInDefault(props.modelValue, '')));\n    watch(() => { return props.modelValue; }, (val) => {\n        var _a;\n        inputText.value = String(isEmptyVariableInDefault(val, ''));\n        if (props.validateEvent) {\n            (_a = formItem === null || formItem === void 0 ? void 0 : formItem.validate) === null || _a === void 0 ? void 0 : _a.call(formItem, 'change').catch((err) => {\n                debugWarn(err);\n            });\n        }\n    });\n    // 显示/隐藏密码状态\n    const _b = __read(useToggle(false), 2), passwordVisible = _b[0], togglePasswordVisible = _b[1];\n    // 是否显示状态图标\n    const needStatusIcon = computed(() => {\n        return isEmptyVariableInDefault(form === null || form === void 0 ? void 0 : form.statusIcon, false);\n    });\n    // 校验状态\n    const validateState = computed(() => {\n        return isEmptyVariableInDefault(formItem === null || formItem === void 0 ? void 0 : formItem.validateState, '');\n    });\n    // 校验状态图标\n    const validateIcon = computed(() => { return validateState.value && FormValidateIconsMap[validateState.value]; });\n    // 密码显示密码图标\n    const passwordIcon = computed(() => {\n        return passwordVisible.value ? 'eye-hide' : 'eye';\n    });\n    // 是否显示图标\n    const showIcon = computed(() => {\n        let status = false;\n        if (validateState.value && needStatusIcon.value && validateIcon.value)\n            status = true;\n        if (props.showPassword)\n            status = true;\n        if (props.rightIcon)\n            status = true;\n        if (props.clearable)\n            status = true;\n        return status;\n    });\n    // 输入框禁止事件\n    const disabled = useFormDisabled(props.disabled);\n    // 是否显示字数统计\n    const showWordLimit = computed(() => {\n        return props.type === 'textarea' && !!(props === null || props === void 0 ? void 0 : props.maxlength) && !!(props === null || props === void 0 ? void 0 : props.showWordLimit);\n    });\n    // 当前的字数\n    const currentWordCount = computed(() => {\n        var _a;\n        if (props.showWordLimit && props.type === 'textarea') {\n            return ((_a = inputText.value) === null || _a === void 0 ? void 0 : _a.length) || 0;\n        }\n        return 0;\n    });\n    // 内容输入触发事件\n    const inputInputEvent = (event) => {\n        const value = event.detail.value;\n        _updateInputText(value);\n    };\n    // 输入框聚焦事件\n    const inputFocusEvent = (event) => {\n        emits('focus', event);\n    };\n    // 输入框失去焦点事件\n    const inputBlurEvent = (event) => {\n        var _a;\n        emits('blur', event);\n        if (props.validateEvent) {\n            // eslint-disable-next-line @typescript-eslint/no-empty-function\n            (_a = formItem === null || formItem === void 0 ? void 0 : formItem.validate) === null || _a === void 0 ? void 0 : _a.call(formItem, 'blur').catch((err) => {\n                debugWarn(err);\n            });\n        }\n    };\n    // 点击完成时触发事件\n    const confirmEvent = (event) => {\n        const value = event.detail.value;\n        emits('confirm', _formatInputText(value));\n    };\n    // 点击清除按钮\n    const clearClickEvent = () => {\n        if (disabled.value)\n            return;\n        _updateInputText('');\n        emits('clear');\n    };\n    // 更新输入框内容\n    const _updateInputText = (value) => {\n        value = props.trim ? trim(value) : value;\n        // inputText.value = value\n        emits(UPDATE_MODEL_EVENT, _formatInputText(value));\n        nextTick(() => {\n            emits(INPUT_EVENT, _formatInputText(value));\n            emits(CHANGE_EVENT, _formatInputText(value));\n        });\n    };\n    // 输入框点击事件\n    const inputClickEvent = () => {\n        if (props.type === 'select') {\n            emits('click');\n        }\n    };\n    const _formatInputText = (value) => {\n        if (value === '')\n            return '';\n        if (props.type === 'number' || props.type === 'digit')\n            return Number.parseFloat(value);\n        return value;\n    };\n    return {\n        inputText,\n        needStatusIcon,\n        validateState,\n        validateIcon,\n        passwordVisible,\n        passwordIcon,\n        showIcon,\n        disabled,\n        showWordLimit,\n        currentWordCount,\n        togglePasswordVisible,\n        inputInputEvent,\n        inputFocusEvent,\n        inputBlurEvent,\n        clearClickEvent,\n        confirmEvent,\n        inputClickEvent,\n    };\n};\n//# sourceMappingURL=D:/Development/project/wallpaper-share-wx/uni_modules/tuniaoui-vue3/components/input/src/composables/use-input.js.map","references":["D:/Development/HBuilderX/plugins/uniapp-cli-vite/node_modules/@vue/runtime-core/dist/runtime-core.d.ts","D:/Development/project/wallpaper-share-wx/uni_modules/tuniaoui-vue3/libs/lodash/index.ts","D:/Development/project/wallpaper-share-wx/uni_modules/tuniaoui-vue3/constants/index.ts","D:/Development/project/wallpaper-share-wx/uni_modules/tuniaoui-vue3/utils/index.ts","D:/Development/project/wallpaper-share-wx/uni_modules/tuniaoui-vue3/hooks/index.ts","D:/Development/project/wallpaper-share-wx/uni_modules/tuniaoui-vue3/components/form/index.ts","D:/Development/HBuilderX/plugins/uniapp-cli-vite/node_modules/@vue/runtime-core/dist/runtime-core.d.ts","D:/Development/project/wallpaper-share-wx/uni_modules/tuniaoui-vue3/components/form/index.ts","D:/Development/project/wallpaper-share-wx/uni_modules/tuniaoui-vue3/components/input/src/input.ts"],"uniExtApis":[],"map":"{\"version\":3,\"file\":\"use-input.js\",\"sourceRoot\":\"\",\"sources\":[\"use-input.ts\"],\"names\":[],\"mappings\":\";AAAA,OAAO,EAAE,QAAQ,EAAE,QAAQ,EAAE,GAAG,EAAE,KAAK,EAAE,MAAM,KAAK,CAAA;AACpD,OAAO,EAAE,IAAI,EAAE,MAAM,yBAAyB,CAAA;AAC9C,OAAO,EACL,YAAY,EACZ,WAAW,EACX,kBAAkB,GACnB,MAAM,uBAAuB,CAAA;AAC9B,OAAO,EACL,oBAAoB,EACpB,SAAS,EACT,wBAAwB,GACzB,MAAM,mBAAmB,CAAA;AAC1B,OAAO,EAAE,SAAS,EAAE,MAAM,mBAAmB,CAAA;AAC7C,OAAO,EAAE,eAAe,EAAE,WAAW,EAAE,MAAM,eAAe,CAAA;AAM5D,MAAM,CAAC,MAAM,QAAQ,GAAG,CACtB,KAAiB,EACjB,KAAsC;IAEhC,MAAA,KAAqB,WAAW,EAAE,EAAhC,IAAI,UAAA,EAAE,QAAQ,cAAkB,CAAA;IAExC,QAAQ;IACR,MAAM,SAAS,GAAG,GAAG,CACnB,MAAM,CAAC,wBAAwB,CAAC,KAAK,CAAC,UAAU,EAAE,EAAE,CAAC,CAAC,CACvD,CAAA;IACD,KAAK,CACH,QAAM,OAAA,KAAK,CAAC,UAAU,EAAhB,CAAgB,EACtB,CAAC,GAAG;;QACF,SAAS,CAAC,KAAK,GAAG,MAAM,CAAC,wBAAwB,CAAC,GAAG,EAAE,EAAE,CAAC,CAAC,CAAA;QAC3D,IAAI,KAAK,CAAC,aAAa,EAAE;YACvB,MAAA,QAAQ,aAAR,QAAQ,uBAAR,QAAQ,CAAE,QAAQ,yDAAG,QAAQ,EAAE,KAAK,CAAC,CAAC,GAAG;gBACvC,SAAS,CAAC,GAAG,CAAC,CAAA;YAChB,CAAC,CAAC,CAAA;SACH;IACH,CAAC,CACF,CAAA;IAED,YAAY;IACN,MAAA,KAAA,OAA2C,SAAS,CAAC,KAAK,CAAC,IAAA,EAA1D,eAAe,QAAA,EAAE,qBAAqB,QAAoB,CAAA;IAEjE,WAAW;IACX,MAAM,cAAc,GAAG,QAAQ,CAAC;QAC9B,OAAA,wBAAwB,CAAC,IAAI,aAAJ,IAAI,uBAAJ,IAAI,CAAE,UAAU,EAAE,KAAK,CAAC;IAAjD,CAAiD,CAClD,CAAA;IACD,OAAO;IACP,MAAM,aAAa,GAAG,QAAQ,CAAC;QAC7B,OAAA,wBAAwB,CACtB,QAAQ,aAAR,QAAQ,uBAAR,QAAQ,CAAE,aAAa,EACvB,EAAE,CACH;IAHD,CAGC,CACF,CAAA;IACD,SAAS;IACT,MAAM,YAAY,GAAG,QAAQ,CAC3B,QAAM,OAAA,aAAa,CAAC,KAAK,IAAI,oBAAoB,CAAC,aAAa,CAAC,KAAK,CAAC,EAAhE,CAAgE,CACvE,CAAA;IAED,WAAW;IACX,MAAM,YAAY,GAAG,QAAQ,CAAC;QAC5B,OAAA,eAAe,CAAC,KAAK,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,KAAK;IAA1C,CAA0C,CAC3C,CAAA;IAED,SAAS;IACT,MAAM,QAAQ,GAAG,QAAQ,CAAC;QACxB,IAAI,MAAM,GAAG,KAAK,CAAA;QAClB,IAAI,aAAa,CAAC,KAAK,IAAI,cAAc,CAAC,KAAK,IAAI,YAAY,CAAC,KAAK;YACnE,MAAM,GAAG,IAAI,CAAA;QACf,IAAI,KAAK,CAAC,YAAY;YAAE,MAAM,GAAG,IAAI,CAAA;QACrC,IAAI,KAAK,CAAC,SAAS;YAAE,MAAM,GAAG,IAAI,CAAA;QAClC,IAAI,KAAK,CAAC,SAAS;YAAE,MAAM,GAAG,IAAI,CAAA;QAClC,OAAO,MAAM,CAAA;IACf,CAAC,CAAC,CAAA;IAEF,UAAU;IACV,MAAM,QAAQ,GAAG,eAAe,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAA;IAEhD,WAAW;IACX,MAAM,aAAa,GAAG,QAAQ,CAC5B;QACE,OAAA,KAAK,CAAC,IAAI,KAAK,UAAU,IAAI,CAAC,CAAC,CAAA,KAAK,aAAL,KAAK,uBAAL,KAAK,CAAE,SAAS,CAAA,IAAI,CAAC,CAAC,CAAA,KAAK,aAAL,KAAK,uBAAL,KAAK,CAAE,aAAa,CAAA;IAAzE,CAAyE,CAC5E,CAAA;IACD,QAAQ;IACR,MAAM,gBAAgB,GAAG,QAAQ,CAAS;;QACxC,IAAI,KAAK,CAAC,aAAa,IAAI,KAAK,CAAC,IAAI,KAAK,UAAU,EAAE;YACpD,OAAO,CAAA,MAAA,SAAS,CAAC,KAAK,0CAAE,MAAM,KAAI,CAAC,CAAA;SACpC;QACD,OAAO,CAAC,CAAA;IACV,CAAC,CAAC,CAAA;IAEF,WAAW;IACX,MAAM,eAAe,GAAG,CAAC,KAAU;QACzB,MAAA,KAAK,GAAK,KAAK,CAAC,MAAM,MAAjB,CAAiB;QAC9B,gBAAgB,CAAC,KAAK,CAAC,CAAA;IACzB,CAAC,CAAA;IAED,UAAU;IACV,MAAM,eAAe,GAAG,CAAC,KAAU;QACjC,KAAK,CAAC,OAAO,EAAE,KAAK,CAAC,CAAA;IACvB,CAAC,CAAA;IAED,YAAY;IACZ,MAAM,cAAc,GAAG,CAAC,KAAU;;QAChC,KAAK,CAAC,MAAM,EAAE,KAAK,CAAC,CAAA;QACpB,IAAI,KAAK,CAAC,aAAa,EAAE;YACvB,gEAAgE;YAChE,MAAA,QAAQ,aAAR,QAAQ,uBAAR,QAAQ,CAAE,QAAQ,yDAAG,MAAM,EAAE,KAAK,CAAC,CAAC,GAAG;gBACrC,SAAS,CAAC,GAAG,CAAC,CAAA;YAChB,CAAC,CAAC,CAAA;SACH;IACH,CAAC,CAAA;IAED,YAAY;IACZ,MAAM,YAAY,GAAG,CAAC,KAAU;QACtB,MAAA,KAAK,GAAK,KAAK,CAAC,MAAM,MAAjB,CAAiB;QAC9B,KAAK,CAAC,SAAS,EAAE,gBAAgB,CAAC,KAAK,CAAC,CAAC,CAAA;IAC3C,CAAC,CAAA;IAED,SAAS;IACT,MAAM,eAAe,GAAG;QACtB,IAAI,QAAQ,CAAC,KAAK;YAAE,OAAM;QAC1B,gBAAgB,CAAC,EAAE,CAAC,CAAA;QACpB,KAAK,CAAC,OAAO,CAAC,CAAA;IAChB,CAAC,CAAA;IAED,UAAU;IACV,MAAM,gBAAgB,GAAG,CAAC,KAAa;QACrC,KAAK,GAAG,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,CAAA;QACxC,0BAA0B;QAC1B,KAAK,CAAC,kBAAkB,EAAE,gBAAgB,CAAC,KAAK,CAAC,CAAC,CAAA;QAClD,QAAQ,CAAC;YACP,KAAK,CAAC,WAAW,EAAE,gBAAgB,CAAC,KAAK,CAAC,CAAC,CAAA;YAC3C,KAAK,CAAC,YAAY,EAAE,gBAAgB,CAAC,KAAK,CAAC,CAAC,CAAA;QAC9C,CAAC,CAAC,CAAA;IACJ,CAAC,CAAA;IAED,UAAU;IACV,MAAM,eAAe,GAAG;QACtB,IAAI,KAAK,CAAC,IAAI,KAAK,QAAQ,EAAE;YAC3B,KAAK,CAAC,OAAO,CAAC,CAAA;SACf;IACH,CAAC,CAAA;IAED,MAAM,gBAAgB,GAAG,CAAC,KAAa;QACrC,IAAI,KAAK,KAAK,EAAE;YAAE,OAAO,EAAE,CAAA;QAC3B,IAAI,KAAK,CAAC,IAAI,KAAK,QAAQ,IAAI,KAAK,CAAC,IAAI,KAAK,OAAO;YACnD,OAAO,MAAM,CAAC,UAAU,CAAC,KAAK,CAAC,CAAA;QACjC,OAAO,KAAK,CAAA;IACd,CAAC,CAAA;IAED,OAAO;QACL,SAAS;QACT,cAAc;QACd,aAAa;QACb,YAAY;QACZ,eAAe;QACf,YAAY;QACZ,QAAQ;QACR,QAAQ;QACR,aAAa;QACb,gBAAgB;QAChB,qBAAqB;QACrB,eAAe;QACf,eAAe;QACf,cAAc;QACd,eAAe;QACf,YAAY;QACZ,eAAe;KAChB,CAAA;AACH,CAAC,CAAA\"}"}
