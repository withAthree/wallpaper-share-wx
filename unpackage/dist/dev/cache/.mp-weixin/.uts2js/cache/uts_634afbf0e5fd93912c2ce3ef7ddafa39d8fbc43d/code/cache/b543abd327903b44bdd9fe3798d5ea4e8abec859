{"code":"import { __awaiter } from \"tslib\";\nimport { computed, getCurrentInstance, nextTick, onMounted, ref } from 'vue';\nimport { useSelectorQuery } from '../../../../hooks';\nimport { debugWarn, generateId } from '../../../../utils';\nexport const useCalendarSelector = (currentDateCount, mode) => {\n    const instance = getCurrentInstance();\n    if (!instance) {\n        debugWarn('TnCalendar', '请在 setup 函数中使用 useCalendarSelector');\n    }\n    const calendarId = `tc-${generateId()}`;\n    const getSelectorNodeInfo = useSelectorQuery(instance).getSelectorNodeInfo;\n    // 单个日期的高度\n    const singleDateItemHeight = ref(0);\n    // 日期容器的高度\n    const dateContainerHeight = computed(() => { return Math.ceil(currentDateCount.value / 7) * singleDateItemHeight.value; });\n    let initCount = 0;\n    // 获取单个日期容器的信息\n    const getDateItemComponentRectInfo = () => { return __awaiter(void 0, void 0, void 0, function* () {\n        try {\n            const rectInfo = yield getSelectorNodeInfo(`#${calendarId} .tn-calendar__data__date`);\n            initCount = 0;\n            singleDateItemHeight.value = rectInfo.width || 0;\n            if (mode === 'date' || mode === 'multi') {\n                singleDateItemHeight.value += uni.upx2px(12);\n            }\n        }\n        catch (err) {\n            if (initCount > 10) {\n                initCount = 0;\n                debugWarn('TnCalendar', `获取单个日期容器信息失败: ${err}`);\n                return;\n            }\n            initCount++;\n            setTimeout(() => {\n                getDateItemComponentRectInfo();\n            }, 150);\n        }\n    }); };\n    onMounted(() => {\n        nextTick(() => {\n            setTimeout(() => {\n                getDateItemComponentRectInfo();\n            }, 50);\n        });\n    });\n    return {\n        calendarId,\n        dateContainerHeight,\n    };\n};\n//# sourceMappingURL=D:/Development/project/wallpaper-share-wx/uni_modules/tuniaoui-vue3/components/calendar/src/composables/use-calendar-selector.js.map","references":["D:/Development/HBuilderX/plugins/uniapp-cli-vite/node_modules/@vue/runtime-core/dist/runtime-core.d.ts","D:/Development/project/wallpaper-share-wx/uni_modules/tuniaoui-vue3/hooks/index.ts","D:/Development/project/wallpaper-share-wx/uni_modules/tuniaoui-vue3/utils/index.ts","D:/Development/HBuilderX/plugins/uniapp-cli-vite/node_modules/@vue/runtime-core/dist/runtime-core.d.ts","D:/Development/project/wallpaper-share-wx/uni_modules/tuniaoui-vue3/components/calendar/src/calendar.ts"],"uniExtApis":[],"map":"{\"version\":3,\"file\":\"use-calendar-selector.js\",\"sourceRoot\":\"\",\"sources\":[\"use-calendar-selector.ts\"],\"names\":[],\"mappings\":\";AAAA,OAAO,EAAE,QAAQ,EAAE,kBAAkB,EAAE,QAAQ,EAAE,SAAS,EAAE,GAAG,EAAE,MAAM,KAAK,CAAA;AAC5E,OAAO,EAAE,gBAAgB,EAAE,MAAM,mBAAmB,CAAA;AACpD,OAAO,EAAE,SAAS,EAAE,UAAU,EAAE,MAAM,mBAAmB,CAAA;AAKzD,MAAM,CAAC,MAAM,mBAAmB,GAAG,CACjC,gBAA6B,EAC7B,IAAkB;IAElB,MAAM,QAAQ,GAAG,kBAAkB,EAAE,CAAA;IACrC,IAAI,CAAC,QAAQ,EAAE;QACb,SAAS,CAAC,YAAY,EAAE,oCAAoC,CAAC,CAAA;KAC9D;IAED,MAAM,UAAU,GAAG,MAAM,UAAU,EAAE,EAAE,CAAA;IAE/B,MAAA,mBAAmB,GAAK,gBAAgB,CAAC,QAAQ,CAAC,oBAA/B,CAA+B;IAE1D,UAAU;IACV,MAAM,oBAAoB,GAAG,GAAG,CAAS,CAAC,CAAC,CAAA;IAE3C,UAAU;IACV,MAAM,mBAAmB,GAAG,QAAQ,CAClC,QAAM,OAAA,IAAI,CAAC,IAAI,CAAC,gBAAgB,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,oBAAoB,CAAC,KAAK,EAAlE,CAAkE,CACzE,CAAA;IAED,IAAI,SAAS,GAAG,CAAC,CAAA;IACjB,cAAc;IACd,MAAM,4BAA4B,GAAG;QACnC,IAAI;YACF,MAAM,QAAQ,GAAG,MAAM,mBAAmB,CACxC,IAAI,UAAU,2BAA2B,CAC1C,CAAA;YAED,SAAS,GAAG,CAAC,CAAA;YACb,oBAAoB,CAAC,KAAK,GAAG,QAAQ,CAAC,KAAK,IAAI,CAAC,CAAA;YAChD,IAAI,IAAI,KAAK,MAAM,IAAI,IAAI,KAAK,OAAO,EAAE;gBACvC,oBAAoB,CAAC,KAAK,IAAI,GAAG,CAAC,MAAM,CAAC,EAAE,CAAC,CAAA;aAC7C;SACF;QAAC,OAAO,GAAG,EAAE;YACZ,IAAI,SAAS,GAAG,EAAE,EAAE;gBAClB,SAAS,GAAG,CAAC,CAAA;gBACb,SAAS,CAAC,YAAY,EAAE,iBAAiB,GAAG,EAAE,CAAC,CAAA;gBAC/C,OAAM;aACP;YACD,SAAS,EAAE,CAAA;YACX,UAAU,CAAC;gBACT,4BAA4B,EAAE,CAAA;YAChC,CAAC,EAAE,GAAG,CAAC,CAAA;SACR;IACH,CAAC,IAAA,CAAA;IAED,SAAS,CAAC;QACR,QAAQ,CAAC;YACP,UAAU,CAAC;gBACT,4BAA4B,EAAE,CAAA;YAChC,CAAC,EAAE,EAAE,CAAC,CAAA;QACR,CAAC,CAAC,CAAA;IACJ,CAAC,CAAC,CAAA;IAEF,OAAO;QACL,UAAU;QACV,mBAAmB;KACpB,CAAA;AACH,CAAC,CAAA\"}"}
