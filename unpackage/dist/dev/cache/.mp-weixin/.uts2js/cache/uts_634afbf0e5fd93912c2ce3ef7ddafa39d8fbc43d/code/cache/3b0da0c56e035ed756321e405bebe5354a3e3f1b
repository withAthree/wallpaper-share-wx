{"code":"import { nextTick, ref, toRef, watch } from 'vue';\nimport { useLongPress } from '../../../../hooks';\nimport { isEmptyVariableInDefault } from '../../../../utils';\nexport const useKeyboard = (props, emits) => {\n    // 弹出隐藏键盘\n    const showKeyboard = ref(false);\n    watch(() => { return props.show; }, (val) => {\n        showKeyboard.value = val;\n    });\n    // popup弹框关闭事件\n    const popupCloseEvent = () => {\n        emits('close');\n        emits('update:show', false);\n    };\n    // 用户输入的值\n    const inputValue = ref(props.modelValue || '');\n    watch(() => { return props.modelValue; }, (val) => { return (inputValue.value = val); });\n    // 键盘点击事件\n    const keyboardClickEvent = (value, disabled) => {\n        if (disabled)\n            return;\n        if (props.vibrate) {\n            uni.vibrateShort();\n        }\n        let concatValue = true;\n        if (value === 'confirm') {\n            popupCloseEvent();\n            emits('confirm');\n            return;\n        }\n        else if (value === 'cancel') {\n            popupCloseEvent();\n            return;\n        }\n        else {\n            // 处理小数的0位和小数点位置\n            if (props.mode === 'digit') {\n                // 判断当前点击的value是是否位.\n                if (value === '.') {\n                    // 判断modelValue中是否已经存在.，如果存在，则直接return\n                    if (inputValue.value.includes('.')) {\n                        return;\n                    }\n                    // 当小数点在第一位时，前面自动补0\n                    if (inputValue.value === '') {\n                        inputValue.value = '0.';\n                        concatValue = false;\n                    }\n                }\n                // 判断当前点击的value是否为0\n                if (value === '0') {\n                    // 判断第一位是否为0，如果是，直接return\n                    if (inputValue.value === '0') {\n                        return;\n                    }\n                }\n                // 如果第一位为0，第二位不为.，则将第一位替换为当前点击的value\n                if (inputValue.value === '0' && value !== '.') {\n                    inputValue.value = value;\n                    concatValue = false;\n                }\n            }\n            if (props.mode === 'idcard' &&\n                value === 'X' &&\n                inputValue.value.includes('X')) {\n                return;\n            }\n            if (concatValue) {\n                inputValue.value += value;\n            }\n        }\n        emits('update:modelValue', inputValue.value);\n        nextTick(() => {\n            emits('change', inputValue.value);\n        });\n    };\n    // 单独处理删除事件\n    const backspaceEvent = () => {\n        if (inputValue.value === '') {\n            clearBackspaceLongPressEvent();\n            return;\n        }\n        if (props.vibrate) {\n            uni.vibrateShort();\n        }\n        inputValue.value = inputValue.value.slice(0, -1);\n        emits('backspace');\n        emits('update:modelValue', inputValue.value);\n        nextTick(() => {\n            emits('change', inputValue.value);\n        });\n    };\n    const _a = useLongPress(backspaceEvent, toRef(props, 'longPressDelete')), handleBackspaceEvent = _a.handleLongPressEvent, clearBackspaceLongPressEvent = _a.clearLongPressTimer;\n    // 车牌键盘中英文切换\n    const carKeyboardLang = ref(isEmptyVariableInDefault(props.carLang, 'cn'));\n    let updateCarLangInner = false;\n    watch(() => { return props.carLang; }, (val) => {\n        if (updateCarLangInner) {\n            updateCarLangInner = false;\n            return;\n        }\n        carKeyboardLang.value = val;\n    });\n    const carKeyboardSwitchLang = () => {\n        if (carKeyboardLang.value === 'cn') {\n            carKeyboardLang.value = 'en';\n        }\n        else {\n            carKeyboardLang.value = 'cn';\n        }\n        updateCarLangInner = true;\n        emits('update:carLangMode', carKeyboardLang.value);\n    };\n    return {\n        showKeyboard,\n        carKeyboardLang,\n        popupCloseEvent,\n        keyboardClickEvent,\n        handleBackspaceEvent,\n        clearBackspaceLongPressEvent,\n        carKeyboardSwitchLang,\n    };\n};\n//# sourceMappingURL=D:/Development/project/wallpaper-share-wx/uni_modules/tuniaoui-vue3/components/keyboard/src/composables/use-keyboard.js.map","references":["D:/Development/HBuilderX/plugins/uniapp-cli-vite/node_modules/@vue/runtime-core/dist/runtime-core.d.ts","D:/Development/project/wallpaper-share-wx/uni_modules/tuniaoui-vue3/hooks/index.ts","D:/Development/project/wallpaper-share-wx/uni_modules/tuniaoui-vue3/utils/index.ts","D:/Development/HBuilderX/plugins/uniapp-cli-vite/node_modules/@vue/runtime-core/dist/runtime-core.d.ts","D:/Development/project/wallpaper-share-wx/uni_modules/tuniaoui-vue3/components/keyboard/src/keyboard.ts"],"uniExtApis":[],"map":"{\"version\":3,\"file\":\"use-keyboard.js\",\"sourceRoot\":\"\",\"sources\":[\"use-keyboard.ts\"],\"names\":[],\"mappings\":\"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\"}"}
