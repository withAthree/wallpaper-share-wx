{"version":3,"file":"index.js","sources":["uni_modules/tuniaoui-vue3/hooks/use-uniapp-system-rect-info/index.ts"],"sourcesContent":["import { reactive } from 'vue'\r\nimport { debugWarn } from '../../utils'\r\n\r\nexport interface NavBarInfo {\r\n  height: number\r\n  statusHeight: number\r\n}\r\n\r\nexport interface NavbarBoundingInfo {\r\n  width: number\r\n  height: number\r\n  top: number\r\n  right: number\r\n  bottom: number\r\n  left: number\r\n  marginRight: number\r\n}\r\n\r\nexport interface SystemScreenInfo {\r\n  width: number\r\n  height: number\r\n  operationHeight: number\r\n}\r\n\r\n// 默认状态栏高度\r\nconst DEFAULT_STATUS_BAR_HEIGHT = 45\r\n// 默认胶囊的宽度\r\nconst DEFAULT_NAVBAR_BOUNDING_WIDTH = 87\r\n// 默认胶囊的高度\r\nconst DEFAULT_NAVBAR_BOUNDING_HEIGHT = 32\r\n// 默认胶囊的右边距\r\nconst DEFAULT_NAVBAR_BOUNDING_RIGHT = 7\r\n// 默认胶囊的上边距\r\nconst DEFAULT_NAVBAR_BOUNDING_TOP = 4\r\n\r\nexport const useUniAppSystemRectInfo = () => {\r\n  // 状态栏信息\r\n  const navBarInfo = reactive<NavBarInfo>({\r\n    height: 0,\r\n    statusHeight: DEFAULT_STATUS_BAR_HEIGHT,\r\n  })\r\n\r\n  // 状态栏胶囊信息\r\n  const navBarBoundingInfo = reactive<NavbarBoundingInfo>({\r\n    width: 0,\r\n    height: 32,\r\n    top: 0,\r\n    right: 0,\r\n    bottom: 0,\r\n    left: 0,\r\n    marginRight: 0,\r\n  })\r\n\r\n  // 系统屏幕信息\r\n  const systemScreenInfo = reactive<SystemScreenInfo>({\r\n    width: 0,\r\n    height: 0,\r\n    operationHeight: 0,\r\n  })\r\n\r\n  const getSystemRectInfo = () => {\r\n    try {\r\n      const uniSystemInfo = uni.getSystemInfoSync()\r\n      const { statusBarHeight, windowWidth, windowHeight, titleBarHeight } =\r\n        uniSystemInfo\r\n\r\n      let height = 0\r\n      // #ifndef MP\r\n      height = (statusBarHeight || 0) + DEFAULT_STATUS_BAR_HEIGHT\r\n      navBarBoundingInfo.width = DEFAULT_NAVBAR_BOUNDING_WIDTH\r\n      navBarBoundingInfo.height = DEFAULT_NAVBAR_BOUNDING_HEIGHT\r\n      navBarBoundingInfo.right = windowWidth - DEFAULT_NAVBAR_BOUNDING_RIGHT\r\n      navBarBoundingInfo.left =\r\n        windowWidth -\r\n        DEFAULT_NAVBAR_BOUNDING_RIGHT -\r\n        DEFAULT_NAVBAR_BOUNDING_WIDTH\r\n      navBarBoundingInfo.top = DEFAULT_NAVBAR_BOUNDING_TOP\r\n      navBarBoundingInfo.bottom =\r\n        DEFAULT_NAVBAR_BOUNDING_TOP + DEFAULT_NAVBAR_BOUNDING_HEIGHT\r\n      navBarBoundingInfo.marginRight = DEFAULT_NAVBAR_BOUNDING_RIGHT\r\n      // #endif\r\n      // #ifdef MP-WEIXIN || MP-ALIPAY || MP-BAIDU || MP_TOUTIAO || MP-QQ\r\n      const {\r\n        width: menuButtonWidth,\r\n        height: menuButtonHeight,\r\n        bottom: menuButtonBottom,\r\n        top: menuButtonTop,\r\n        left: menuButtonLeft,\r\n        right: menuButtonRight,\r\n      } = uni.getMenuButtonBoundingClientRect()\r\n      navBarBoundingInfo.width = menuButtonWidth\r\n      navBarBoundingInfo.height = menuButtonHeight + 2\r\n      navBarBoundingInfo.bottom = menuButtonBottom\r\n      navBarBoundingInfo.top = menuButtonTop\r\n      navBarBoundingInfo.left = menuButtonLeft\r\n      navBarBoundingInfo.right = menuButtonRight\r\n      // #ifdef MP-ALIPAY\r\n      navBarBoundingInfo.right = menuButtonLeft + menuButtonWidth\r\n      // #endif\r\n      navBarBoundingInfo.marginRight = windowWidth - navBarBoundingInfo.right\r\n\r\n      // 防止导航栏内容区域太靠近底部\r\n      // 菜单胶囊按钮距离顶部的高度\r\n      const menuButtonMarginTopHeight = menuButtonTop - statusBarHeight!\r\n      height =\r\n        menuButtonBottom +\r\n        (menuButtonMarginTopHeight < 4 ? 4 : menuButtonMarginTopHeight)\r\n      // #endif\r\n      // #ifdef MP-ALIPAY\r\n      const { optionMenuLeft } = uni.getMenuButtonBoundingClientRect()\r\n      height = statusBarHeight! + titleBarHeight!\r\n      if (optionMenuLeft) {\r\n        navBarBoundingInfo.left = optionMenuLeft\r\n      }\r\n      // #endif\r\n\r\n      navBarInfo.height = height\r\n      navBarInfo.statusHeight = statusBarHeight!\r\n\r\n      systemScreenInfo.width = windowWidth\r\n      systemScreenInfo.height = windowHeight\r\n      systemScreenInfo.operationHeight = windowHeight - height\r\n    } catch (err) {\r\n      debugWarn(\r\n        'useUniAppSystemRectInfo',\r\n        `[TnGetSystemRectInfo]获取系统容器信息失败: ${err}`\r\n      )\r\n    }\r\n  }\r\n  getSystemRectInfo()\r\n\r\n  return {\r\n    navBarInfo,\r\n    navBarBoundingInfo,\r\n    systemScreenInfo,\r\n    getSystemRectInfo,\r\n  }\r\n}\r\n"],"names":["reactive","uni","debugWarn"],"mappings":";;;;AAyBA,MAAM,4BAA4B;AAUrB,MAAA,0BAA0B,MAAA;AAErC,QAAM,aAAaA,cAAAA,SAAqB;AAAA,IACtC,QAAQ;AAAA,IACR,cAAc;AAAA,EACf,CAAA;AAGD,QAAM,qBAAqBA,cAAAA,SAA6B;AAAA,IACtD,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,KAAK;AAAA,IACL,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,MAAM;AAAA,IACN,aAAa;AAAA,EACd,CAAA;AAGD,QAAM,mBAAmBA,cAAAA,SAA2B;AAAA,IAClD,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,iBAAiB;AAAA,EAClB,CAAA;AAED,QAAM,oBAAoB,MAAA;AACxB,QAAI;AACF,YAAM,gBAAgBC,oBAAI;AAClB,YAAA,kBACN,+BADuB,cACvB,cAAa,aADuB,eACpC,cADgD,cAAE,iBAClD;AAEF,UAAI,SAAS;AAgBP,YAAA,KAOFA,oBAAI,mCANC,kBAAe,GAAA,OACd,mBAAgB,GAAA,QAChB,mBAAgB,GAAA,QACnB,gBAAa,GAAA,KACZ,iBAAc,GAAA,MACb,kBAAe,GAAA;AAExB,yBAAmB,QAAQ;AAC3B,yBAAmB,SAAS,mBAAmB;AAC/C,yBAAmB,SAAS;AAC5B,yBAAmB,MAAM;AACzB,yBAAmB,OAAO;AAC1B,yBAAmB,QAAQ;AAI3B,yBAAmB,cAAc,cAAc,mBAAmB;AAIlE,YAAM,4BAA4B,gBAAgB;AAClD,eACE,oBACC,4BAA4B,IAAI,IAAI;AAUvC,iBAAW,SAAS;AACpB,iBAAW,eAAe;AAE1B,uBAAiB,QAAQ;AACzB,uBAAiB,SAAS;AAC1B,uBAAiB,kBAAkB,eAAe;AAAA,IACnD,SAAQ,KAAK;AACZC,2CAAAA,UACE,2BACA,oCAAoC,GAAG,EAAE;AAAA,IAE5C;AAAA,EACH;AACA;AAEA,SAAO;AAAA,IACL;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA;AAEJ;;"}