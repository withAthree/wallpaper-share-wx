{"code":"import { __awaiter } from \"tslib\";\nimport { computed, getCurrentInstance, inject, nextTick, onMounted, onUnmounted, ref, } from 'vue';\nimport { tabbarContextKey } from '../../../../tokens';\nimport { useSelectorQuery } from '../../../../hooks';\nimport { debugWarn, generateId } from '../../../../utils';\nexport const useTabbarItem = (props, emit) => {\n    const tabbarContext = inject(tabbarContextKey);\n    // instance\n    const instance = getCurrentInstance();\n    if (!tabbarContext) {\n        debugWarn('TnTabbarItem', 'TnTabbarItem必须在TnTabbar中使用');\n    }\n    if (!instance) {\n        debugWarn('TnTabbarItem', 'TnTabbarItem必须在setup中使用');\n    }\n    const uid = instance.uid || generateId();\n    const itemId = `tti-${uid}`;\n    const getSelectorNodeInfo = useSelectorQuery(instance).getSelectorNodeInfo;\n    // 当前Item是否已激活\n    const isActive = computed(() => { return (tabbarContext === null || tabbarContext === void 0 ? void 0 : tabbarContext.activeUid) === uid; });\n    // 图标尺寸\n    const iconSize = computed(() => { return props.iconSize || (tabbarContext === null || tabbarContext === void 0 ? void 0 : tabbarContext.iconSize) || ''; });\n    // 是否有角标\n    const hasBadge = computed(() => { return !!props.badge; });\n    // item点击事件\n    const itemClick = () => {\n        if (isActive.value || props.disabled)\n            return;\n        tabbarContext === null || tabbarContext === void 0 ? void 0 : tabbarContext.setActiveItem(uid);\n        emit('click');\n    };\n    const itemRectInfo = ref({\n        width: 0,\n        height: 0,\n        left: 0,\n    });\n    let initRectCount = 0;\n    // 获取容器节点信息\n    const getItemRectInfo = () => { return __awaiter(void 0, void 0, void 0, function* () {\n        try {\n            const rectInfo = yield getSelectorNodeInfo(`#${itemId}`);\n            if (rectInfo.width && rectInfo.width < 30) {\n                throw new Error('获取TabbarItem节点宽度失败');\n            }\n            initRectCount = 0;\n            itemRectInfo.value.width = rectInfo.width || 0;\n            itemRectInfo.value.height = rectInfo.height || 0;\n            itemRectInfo.value.left = rectInfo.left || 0;\n            if (itemRectInfo.value.width > 80) {\n                itemRectInfo.value.maxWidth = 80;\n            }\n            tabbarContext === null || tabbarContext === void 0 ? void 0 : tabbarContext.setBulgeCircle(itemRectInfo.value);\n        }\n        catch (err) {\n            if (initRectCount > 10) {\n                initRectCount = 0;\n                debugWarn('TnTabbarItem', `获取TabbarItem节点信息失败: ${err}`);\n                return;\n            }\n            initRectCount++;\n            setTimeout(() => {\n                getItemRectInfo();\n            }, 150);\n        }\n    }); };\n    tabbarContext === null || tabbarContext === void 0 ? void 0 : tabbarContext.addItem({\n        uid,\n        name: props.name,\n    });\n    onMounted(() => {\n        nextTick(() => {\n            if (props.bulge)\n                getItemRectInfo();\n        });\n    });\n    onUnmounted(() => {\n        tabbarContext === null || tabbarContext === void 0 ? void 0 : tabbarContext.removeItem(uid);\n    });\n    return {\n        itemId,\n        isActive,\n        itemRectInfo,\n        iconSize,\n        hasBadge,\n        itemClick,\n    };\n};\n//# sourceMappingURL=D:/DEV/Project/wallpaper-share-wx/uni_modules/tuniaoui-vue3/components/tabbar/src/composables/use-tabbar-item.js.map","references":["D:/DEV/HBuilderX/plugins/uniapp-cli-vite/node_modules/@vue/runtime-core/dist/runtime-core.d.ts","D:/DEV/Project/wallpaper-share-wx/uni_modules/tuniaoui-vue3/tokens/index.ts","D:/DEV/Project/wallpaper-share-wx/uni_modules/tuniaoui-vue3/hooks/index.ts","D:/DEV/Project/wallpaper-share-wx/uni_modules/tuniaoui-vue3/utils/index.ts","D:/DEV/HBuilderX/plugins/uniapp-cli-vite/node_modules/@vue/runtime-core/dist/runtime-core.d.ts","D:/DEV/Project/wallpaper-share-wx/uni_modules/tuniaoui-vue3/components/tabbar/src/tabbar-item.ts","D:/DEV/Project/wallpaper-share-wx/uni_modules/tuniaoui-vue3/components/tabbar/src/types.ts"],"uniExtApis":[],"map":"{\"version\":3,\"file\":\"use-tabbar-item.js\",\"sourceRoot\":\"\",\"sources\":[\"use-tabbar-item.ts\"],\"names\":[],\"mappings\":\"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\"}"}
