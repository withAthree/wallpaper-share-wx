{"code":"import { __awaiter } from \"tslib\";\nimport { getCurrentInstance, nextTick, onMounted, ref } from 'vue';\nimport { useSelectorQuery } from '../../../../hooks';\nimport { debugWarn, generateId } from '../../../../utils';\nexport const useScrollList = (props, emits) => {\n    const instance = getCurrentInstance();\n    if (!instance) {\n        debugWarn('TnScrollList', '请在setup函数中使用useScrollList');\n    }\n    // 内容容器id\n    const componentId = `tsl-${generateId()}`;\n    const componentContentId = `${componentId}-content`;\n    const getSelectorNodeInfo = useSelectorQuery(instance).getSelectorNodeInfo;\n    // 内容容器的宽度\n    let componentWidth = 0;\n    let comoponentContentWidth = 0;\n    // 滑块滑动的距离\n    const indicatorBlockScrollDistance = ref(0);\n    let initCount = 0;\n    // 获取内容容器的宽度\n    const getContentRectInfo = () => { return __awaiter(void 0, void 0, void 0, function* () {\n        try {\n            const componentRectInfo = yield getSelectorNodeInfo(`#${componentId}`);\n            const contentRectInfo = yield getSelectorNodeInfo(`#${componentContentId}`);\n            initCount = 0;\n            componentWidth = componentRectInfo.width || 0;\n            comoponentContentWidth = contentRectInfo.width || 0;\n        }\n        catch (err) {\n            if (initCount > 10) {\n                initCount = 0;\n                debugWarn('TnScrollList', `获取内容容器的宽度失败: ${err}`);\n                return;\n            }\n            initCount++;\n            setTimeout(() => {\n                getContentRectInfo();\n            }, 150);\n        }\n    }); };\n    // scrollView滚动事件\n    const scrollViewScrollEvent = (e) => {\n        const scrollLeft = e.detail.scrollLeft;\n        indicatorBlockScrollDistance.value =\n            (scrollLeft * (props.indicatorWidth - props.indicatorBlockWidth)) /\n                (comoponentContentWidth - componentWidth);\n    };\n    // scrollView滚动到最左边触发\n    const scrollToLeftEvent = () => {\n        emits('scroll-left');\n    };\n    // scrollView滚动到最右边触发\n    const scrollToRightEvent = () => {\n        emits('scroll-right');\n    };\n    onMounted(() => {\n        nextTick(() => {\n            getContentRectInfo();\n        });\n    });\n    return {\n        componentId,\n        componentContentId,\n        indicatorBlockScrollDistance,\n        scrollViewScrollEvent,\n        scrollToLeftEvent,\n        scrollToRightEvent,\n    };\n};\n//# sourceMappingURL=D:/Development/project/wallpaper-share-wx/uni_modules/tuniaoui-vue3/components/scroll-list/src/composables/use-scroll-list.js.map","references":["D:/Development/HBuilderX/plugins/uniapp-cli-vite/node_modules/@vue/runtime-core/dist/runtime-core.d.ts","D:/Development/project/wallpaper-share-wx/uni_modules/tuniaoui-vue3/hooks/index.ts","D:/Development/project/wallpaper-share-wx/uni_modules/tuniaoui-vue3/utils/index.ts","D:/Development/HBuilderX/plugins/uniapp-cli-vite/node_modules/@vue/runtime-core/dist/runtime-core.d.ts","D:/Development/project/wallpaper-share-wx/uni_modules/tuniaoui-vue3/components/scroll-list/src/scroll-list.ts"],"uniExtApis":[],"map":"{\"version\":3,\"file\":\"use-scroll-list.js\",\"sourceRoot\":\"\",\"sources\":[\"use-scroll-list.ts\"],\"names\":[],\"mappings\":\";AAAA,OAAO,EAAE,kBAAkB,EAAE,QAAQ,EAAE,SAAS,EAAE,GAAG,EAAE,MAAM,KAAK,CAAA;AAClE,OAAO,EAAE,gBAAgB,EAAE,MAAM,mBAAmB,CAAA;AACpD,OAAO,EAAE,SAAS,EAAE,UAAU,EAAE,MAAM,mBAAmB,CAAA;AAKzD,MAAM,CAAC,MAAM,aAAa,GAAG,CAC3B,KAAsB,EACtB,KAA4C;IAE5C,MAAM,QAAQ,GAAG,kBAAkB,EAAE,CAAA;IACrC,IAAI,CAAC,QAAQ,EAAE;QACb,SAAS,CAAC,cAAc,EAAE,2BAA2B,CAAC,CAAA;KACvD;IAED,SAAS;IACT,MAAM,WAAW,GAAG,OAAO,UAAU,EAAE,EAAE,CAAA;IACzC,MAAM,kBAAkB,GAAG,GAAG,WAAW,UAAU,CAAA;IAC3C,MAAA,mBAAmB,GAAK,gBAAgB,CAAC,QAAQ,CAAC,oBAA/B,CAA+B;IAE1D,UAAU;IACV,IAAI,cAAc,GAAG,CAAC,CAAA;IACtB,IAAI,sBAAsB,GAAG,CAAC,CAAA;IAE9B,UAAU;IACV,MAAM,4BAA4B,GAAG,GAAG,CAAS,CAAC,CAAC,CAAA;IAEnD,IAAI,SAAS,GAAG,CAAC,CAAA;IACjB,YAAY;IACZ,MAAM,kBAAkB,GAAG;QACzB,IAAI;YACF,MAAM,iBAAiB,GAAG,MAAM,mBAAmB,CAAC,IAAI,WAAW,EAAE,CAAC,CAAA;YACtE,MAAM,eAAe,GAAG,MAAM,mBAAmB,CAC/C,IAAI,kBAAkB,EAAE,CACzB,CAAA;YAED,SAAS,GAAG,CAAC,CAAA;YACb,cAAc,GAAG,iBAAiB,CAAC,KAAK,IAAI,CAAC,CAAA;YAC7C,sBAAsB,GAAG,eAAe,CAAC,KAAK,IAAI,CAAC,CAAA;SACpD;QAAC,OAAO,GAAG,EAAE;YACZ,IAAI,SAAS,GAAG,EAAE,EAAE;gBAClB,SAAS,GAAG,CAAC,CAAA;gBACb,SAAS,CAAC,cAAc,EAAE,gBAAgB,GAAG,EAAE,CAAC,CAAA;gBAChD,OAAM;aACP;YACD,SAAS,EAAE,CAAA;YACX,UAAU,CAAC;gBACT,kBAAkB,EAAE,CAAA;YACtB,CAAC,EAAE,GAAG,CAAC,CAAA;SACR;IACH,CAAC,IAAA,CAAA;IAED,iBAAiB;IACjB,MAAM,qBAAqB,GAAG,CAAC,CAAM;QACnC,MAAM,UAAU,GAAG,CAAC,CAAC,MAAM,CAAC,UAAU,CAAA;QACtC,4BAA4B,CAAC,KAAK;YAChC,CAAC,UAAU,GAAG,CAAC,KAAK,CAAC,cAAc,GAAG,KAAK,CAAC,mBAAmB,CAAC,CAAC;gBACjE,CAAC,sBAAsB,GAAG,cAAc,CAAC,CAAA;IAC7C,CAAC,CAAA;IAED,qBAAqB;IACrB,MAAM,iBAAiB,GAAG;QACxB,KAAK,CAAC,aAAa,CAAC,CAAA;IACtB,CAAC,CAAA;IACD,qBAAqB;IACrB,MAAM,kBAAkB,GAAG;QACzB,KAAK,CAAC,cAAc,CAAC,CAAA;IACvB,CAAC,CAAA;IAED,SAAS,CAAC;QACR,QAAQ,CAAC;YACP,kBAAkB,EAAE,CAAA;QACtB,CAAC,CAAC,CAAA;IACJ,CAAC,CAAC,CAAA;IAEF,OAAO;QACL,WAAW;QACX,kBAAkB;QAClB,4BAA4B;QAC5B,qBAAqB;QACrB,iBAAiB;QACjB,kBAAkB;KACnB,CAAA;AACH,CAAC,CAAA\"}"}
