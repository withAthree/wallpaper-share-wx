{"version":3,"file":"modal-custom.js","sources":["uni_modules/tuniaoui-vue3/components/modal/src/composables/modal-custom.ts"],"sourcesContent":["import { computed, toRef, watch } from 'vue'\nimport { useComponentColor, useNamespace } from '../../../../hooks'\n\nimport type { CSSProperties, Ref } from 'vue'\nimport type { ModalBtnStyle } from '../modal'\n\ntype OperationBtnComputedClass = (type: 'cancel' | 'confirm') => string\ntype OperationBtnComputedStyle = (type: 'cancel' | 'confirm') => CSSProperties\n\nexport const useModalCustomStyle = (\n  cancelBtnStyle: Ref<ModalBtnStyle>,\n  confirmBtnStyle: Ref<ModalBtnStyle>\n) => {\n  const ns = useNamespace('modal')\n\n  // 解析按钮的颜色\n  const [cancelBtnBgClass, cancelBtnBgStyle, updateCancelBtnBg] =\n    useComponentColor(toRef(cancelBtnStyle.value, 'bgColor'), 'bg')\n  const [cancelBtnColorClass, cancelBtnColorStyle, updateCancelBtnColor] =\n    useComponentColor(toRef(cancelBtnStyle.value, 'color'), 'text')\n  const [confirmBtnBgClass, confirmBtnBgStyle, updateConfirmBtnBg] =\n    useComponentColor(toRef(confirmBtnStyle.value, 'bgColor'), 'bg')\n  const [confirmBtnColorClass, confirmBtnColorStyle, updateConfirmBtnColor] =\n    useComponentColor(toRef(confirmBtnStyle.value, 'color'), 'text')\n\n  watch(\n    () => confirmBtnStyle,\n    (value) => {\n      updateConfirmBtnBg(value.value.bgColor)\n      updateConfirmBtnColor(value.value.color)\n    },\n    {\n      deep: true,\n    }\n  )\n  watch(\n    () => cancelBtnStyle,\n    (value) => {\n      updateCancelBtnBg(value.value.bgColor)\n      updateCancelBtnColor(value.value.color)\n    },\n    {\n      deep: true,\n    }\n  )\n\n  // 操作按钮所属类\n  const operationBtnClass = computed<OperationBtnComputedClass>(() => {\n    return (type: 'cancel' | 'confirm') => {\n      const cls: string[] = [\n        ns.e('operation-btn'),\n        ns.em('operation-btn', type),\n      ]\n\n      if (type === 'cancel') {\n        if (cancelBtnBgClass.value) cls.push(cancelBtnBgClass.value)\n        if (cancelBtnColorClass.value) cls.push(cancelBtnColorClass.value)\n      }\n      if (type === 'confirm') {\n        if (confirmBtnBgClass.value) cls.push(confirmBtnBgClass.value)\n        if (confirmBtnColorClass.value) cls.push(confirmBtnColorClass.value)\n      }\n\n      return cls.join(' ')\n    }\n  })\n\n  // 操作按钮的样式\n  const operationBtnStyle = computed<OperationBtnComputedStyle>(() => {\n    return (type: 'cancel' | 'confirm') => {\n      const style: CSSProperties = {}\n\n      if (type === 'cancel') {\n        if (cancelBtnBgStyle.value)\n          style.backgroundColor = cancelBtnBgStyle.value\n        if (cancelBtnColorStyle.value) {\n          style.color = cancelBtnColorStyle.value\n        } else if (!cancelBtnBgClass.value && !cancelBtnColorClass.value) {\n          style.color = 'var(--tn-color-danger)'\n        }\n      }\n      if (type === 'confirm') {\n        if (confirmBtnBgStyle.value)\n          style.backgroundColor = confirmBtnBgStyle.value\n        if (confirmBtnColorStyle.value) {\n          style.color = confirmBtnColorStyle.value\n        } else if (!confirmBtnBgClass.value && !confirmBtnColorClass.value) {\n          style.color = 'var(--tn-color-primary)'\n        }\n      }\n\n      return style\n    }\n  })\n\n  return {\n    ns,\n    operationBtnClass,\n    operationBtnStyle,\n  }\n}\n"],"names":["useNamespace","__read","useComponentColor","toRef","watch","computed"],"mappings":";;;;;;AASa,MAAA,sBAAsB,CACjC,gBACA,oBAAmC;AAEnC,QAAM,KAAKA,+DAAa,OAAO;AAGzB,QAAA,KAAAC,qBACJC,uDAAAA,kBAAkBC,cAAK,MAAC,eAAe,OAAO,SAAS,GAAG,IAAI,GAAC,CAAA,GAD1D,mBAAgB,GAAA,CAAA,GAAE,mBAAgB,GAAA,CAAA,GAAE,oBAAiB,GAAA,CAAA;AAEtD,QAAA,KAAAF,qBACJC,uDAAAA,kBAAkBC,cAAK,MAAC,eAAe,OAAO,OAAO,GAAG,MAAM,GAAC,CAAA,GAD1D,sBAAmB,GAAA,CAAA,GAAE,sBAAmB,GAAA,CAAA,GAAE,uBAAoB,GAAA,CAAA;AAE/D,QAAA,KAAAF,qBACJC,uDAAAA,kBAAkBC,cAAK,MAAC,gBAAgB,OAAO,SAAS,GAAG,IAAI,GAAC,CAAA,GAD3D,oBAAiB,GAAA,CAAA,GAAE,oBAAiB,GAAA,CAAA,GAAE,qBAAkB,GAAA,CAAA;AAEzD,QAAA,KAAAF,qBACJC,uDAAAA,kBAAkBC,cAAK,MAAC,gBAAgB,OAAO,OAAO,GAAG,MAAM,GAAC,CAAA,GAD3D,uBAAoB,GAAA,CAAA,GAAE,uBAAoB,GAAA,CAAA,GAAE,wBAAqB,GAAA,CAAA;AAGxEC,gBAAAA,MACE;AAAM,WAAA;AAAA,EAAe,GACrB,CAAC,UAAK;AACJ,uBAAmB,MAAM,MAAM,OAAO;AACtC,0BAAsB,MAAM,MAAM,KAAK;AAAA,EACzC,GACA;AAAA,IACE,MAAM;AAAA,EACP,CAAA;AAEHA,gBAAAA,MACE;AAAM,WAAA;AAAA,EAAc,GACpB,CAAC,UAAK;AACJ,sBAAkB,MAAM,MAAM,OAAO;AACrC,yBAAqB,MAAM,MAAM,KAAK;AAAA,EACxC,GACA;AAAA,IACE,MAAM;AAAA,EACP,CAAA;AAIH,QAAM,oBAAoBC,cAAAA,SAAoC,MAAA;AAC5D,WAAO,CAAC,SAA0B;AAChC,YAAM,MAAgB;AAAA,QACpB,GAAG,EAAE,eAAe;AAAA,QACpB,GAAG,GAAG,iBAAiB,IAAI;AAAA;AAG7B,UAAI,SAAS,UAAU;AACrB,YAAI,iBAAiB;AAAO,cAAI,KAAK,iBAAiB,KAAK;AAC3D,YAAI,oBAAoB;AAAO,cAAI,KAAK,oBAAoB,KAAK;AAAA,MAClE;AACD,UAAI,SAAS,WAAW;AACtB,YAAI,kBAAkB;AAAO,cAAI,KAAK,kBAAkB,KAAK;AAC7D,YAAI,qBAAqB;AAAO,cAAI,KAAK,qBAAqB,KAAK;AAAA,MACpE;AAED,aAAO,IAAI,KAAK,GAAG;AAAA,IACrB;AAAA,EACF,CAAC;AAGD,QAAM,oBAAoBA,cAAAA,SAAoC,MAAA;AAC5D,WAAO,CAAC,SAA0B;AAChC,YAAM,QAAuB,CAAA;AAE7B,UAAI,SAAS,UAAU;AACrB,YAAI,iBAAiB;AACnB,gBAAM,kBAAkB,iBAAiB;AAC3C,YAAI,oBAAoB,OAAO;AAC7B,gBAAM,QAAQ,oBAAoB;AAAA,QACnC,WAAU,CAAC,iBAAiB,SAAS,CAAC,oBAAoB,OAAO;AAChE,gBAAM,QAAQ;AAAA,QACf;AAAA,MACF;AACD,UAAI,SAAS,WAAW;AACtB,YAAI,kBAAkB;AACpB,gBAAM,kBAAkB,kBAAkB;AAC5C,YAAI,qBAAqB,OAAO;AAC9B,gBAAM,QAAQ,qBAAqB;AAAA,QACpC,WAAU,CAAC,kBAAkB,SAAS,CAAC,qBAAqB,OAAO;AAClE,gBAAM,QAAQ;AAAA,QACf;AAAA,MACF;AAED,aAAO;AAAA,IACT;AAAA,EACF,CAAC;AAED,SAAO;AAAA,IACL;AAAA,IACA;AAAA,IACA;AAAA;AAEJ;;"}