{"version":3,"file":"router.js","sources":["uni_modules/tuniaoui-vue3/utils/uniapp/router.ts"],"sourcesContent":["import { debugWarn } from '../error'\r\nimport { isEmptyVariableInDefault } from '../is-empty'\r\n\r\ntype navType = 'navigateTo' | 'redirectTo' | 'reLaunch' | 'switchTab'\r\n\r\n/**\r\n * 返回上一页\r\n * @param indexUrl 首页地址\r\n * @param delta 返回的页面数，如果 delta 大于现有页面数，则返回到首页\r\n */\r\nexport function tnNavBack(indexUrl?: string, delta = 1) {\r\n  const indexPageUrl = isEmptyVariableInDefault(indexUrl, '/pages/index/index')\r\n  // 通过判断当前页面的页面栈信息，是否有上一页进行返回，如果没有则跳转到首页\r\n  const pages = getCurrentPages()\r\n  if (pages?.length) {\r\n    const firstPage = pages[0]\r\n    if (\r\n      pages.length === 1 &&\r\n      (!firstPage.route || firstPage?.route != indexPageUrl)\r\n    ) {\r\n      return tnNavPage(indexPageUrl, 'reLaunch')\r\n    } else {\r\n      uni.navigateBack({\r\n        delta,\r\n      })\r\n      return Promise.resolve()\r\n    }\r\n  } else {\r\n    return tnNavPage(indexPageUrl, 'reLaunch')\r\n  }\r\n}\r\n\r\n/**\r\n * 跳转到指定页面\r\n * @param url 页面地址\r\n * @param type 跳转类型\r\n */\r\nexport function tnNavPage(url: string, type: navType = 'navigateTo') {\r\n  function handelNavFail(err: any) {\r\n    debugWarn('tnNavPage', `跳转页面失败: ${err}`)\r\n  }\r\n  return new Promise<void>((resolve, reject) => {\r\n    switch (type) {\r\n      case 'navigateTo':\r\n        uni.navigateTo({\r\n          url,\r\n          success: () => {\r\n            resolve()\r\n          },\r\n          fail: (err) => {\r\n            handelNavFail(err)\r\n            reject(err)\r\n          },\r\n        })\r\n        break\r\n      case 'redirectTo':\r\n        uni.redirectTo({\r\n          url,\r\n          success: () => {\r\n            resolve()\r\n          },\r\n          fail: (err) => {\r\n            handelNavFail(err)\r\n            reject(err)\r\n          },\r\n        })\r\n        break\r\n      case 'reLaunch':\r\n        uni.reLaunch({\r\n          url,\r\n          success: () => {\r\n            resolve()\r\n          },\r\n          fail: (err) => {\r\n            handelNavFail(err)\r\n            reject(err)\r\n          },\r\n        })\r\n        break\r\n      case 'switchTab':\r\n        uni.switchTab({\r\n          url,\r\n          success: () => {\r\n            resolve()\r\n          },\r\n          fail: (err) => {\r\n            handelNavFail(err)\r\n            reject(err)\r\n          },\r\n        })\r\n    }\r\n  })\r\n}\r\n"],"names":["isEmptyVariableInDefault","uni","debugWarn"],"mappings":";;;;SAUgB,UAAU,UAAmB,QAAQ,GAAC;AACpD,QAAM,eAAeA,uCAAAA,yBAAyB,UAAU,oBAAoB;AAE5E,QAAM,QAAQ;AACd,MAAI,UAAA,QAAA,4BAAA,MAAO,QAAQ;AACjB,UAAM,YAAY,MAAM,CAAC;AACzB,QACE,MAAM,WAAW,MAChB,CAAC,UAAU,UAAS,cAAS,QAAT,cAAS,SAAA,SAAT,UAAW,UAAS,eACzC;AACA,aAAO,UAAU,cAAc,UAAU;AAAA,IAC1C,OAAM;AACLC,oBAAAA,MAAI,aAAa;AAAA,QACf;AAAA,MACD,CAAA;AACD,aAAO,QAAQ;IAChB;AAAA,EACF,OAAM;AACL,WAAO,UAAU,cAAc,UAAU;AAAA,EAC1C;AACH;SAOgB,UAAU,KAAa,OAAgB,cAAY;AACjE,WAAS,cAAc,KAAQ;AAC7BC,yCAAAA,UAAU,aAAa,WAAW,GAAG,EAAE;AAAA,EACxC;AACD,SAAO,IAAI,QAAc,CAAC,SAAS,WAAM;AACvC,YAAQ,MAAI;AAAA,MACV,KAAK;AACHD,sBAAAA,MAAI,WAAW;AAAA,UACb;AAAA,UACA,SAAS,MAAA;AACP;UACD;AAAA,UACD,MAAM,CAAC,QAAG;AACR,0BAAc,GAAG;AACjB,mBAAO,GAAG;AAAA,UACX;AAAA,QACF,CAAA;AACD;AAAA,MACF,KAAK;AACHA,sBAAAA,MAAI,WAAW;AAAA,UACb;AAAA,UACA,SAAS,MAAA;AACP;UACD;AAAA,UACD,MAAM,CAAC,QAAG;AACR,0BAAc,GAAG;AACjB,mBAAO,GAAG;AAAA,UACX;AAAA,QACF,CAAA;AACD;AAAA,MACF,KAAK;AACHA,sBAAAA,MAAI,SAAS;AAAA,UACX;AAAA,UACA,SAAS,MAAA;AACP;UACD;AAAA,UACD,MAAM,CAAC,QAAG;AACR,0BAAc,GAAG;AACjB,mBAAO,GAAG;AAAA,UACX;AAAA,QACF,CAAA;AACD;AAAA,MACF,KAAK;AACHA,sBAAAA,MAAI,UAAU;AAAA,UACZ;AAAA,UACA,SAAS,MAAA;AACP;UACD;AAAA,UACD,MAAM,CAAC,QAAG;AACR,0BAAc,GAAG;AACjB,mBAAO,GAAG;AAAA,UACX;AAAA,QACF,CAAA;AAAA,IACJ;AAAA,EACH,CAAC;AACH;;;"}