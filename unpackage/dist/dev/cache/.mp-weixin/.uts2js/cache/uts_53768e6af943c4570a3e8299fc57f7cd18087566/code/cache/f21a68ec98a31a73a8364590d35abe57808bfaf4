{"code":"import { __awaiter } from \"tslib\";\nimport {} from \"vue\";\nimport { setTempDir, state, setGlobalLoading } from '@/store';\nimport { getLoginCode } from \"/login/index\";\nimport { login } from \"/api/index\";\nlet firstBackTime = 0;\nconst fileMgr = uni.getFileSystemManager();\nexport default defineComponent(new UTSJSONObject({\n    onLaunch: function () {\n        return __awaiter(this, void 0, void 0, function* () {\n            uni.__f__('log', 'at App.uvue:11', 'App Launch');\n            wx.showShareMenu(new UTSJSONObject({\n                withShareTicket: true,\n                //设置下方的Menus菜单，才能够让发送给朋友与分享到朋友圈两个按钮可以点击\n                menus: [\"shareAppMessage\", \"shareTimeline\"]\n            }));\n            setGlobalLoading(true);\n            setTempDir(`${uni.env.USER_DATA_PATH}/wallpaperTempDirAAA`);\n            // 登录\n            if (!uni.getStorageSync('token')) {\n                const res = yield getLoginCode();\n                const response = yield login(new UTSJSONObject({ code: res.code }));\n                if (response.statusCode === 200) {\n                    uni.setStorageSync('token', response.data.token);\n                }\n            }\n            try {\n                fileMgr.rmdirSync(state.tempDir, true);\n            }\n            catch (err) {\n                uni.__f__('error', 'at App.uvue:34', '删除临时文件夹失败: ', err);\n            }\n            // 创建临时目录 \n            try {\n                fileMgr.mkdirSync(state.tempDir, false);\n                uni.__f__('log', 'at App.uvue:40', '创建临时文件夹成功');\n            }\n            catch (err) {\n                uni.__f__('error', 'at App.uvue:42', err);\n            }\n            finally {\n                setGlobalLoading(false);\n            }\n        });\n    },\n    onShow: function () {\n        uni.__f__('log', 'at App.uvue:48', 'App Show');\n    },\n    onHide: function () {\n        uni.__f__('log', 'at App.uvue:51', 'App Hide');\n    },\n    onExit: function () {\n        uni.__f__('log', 'at App.uvue:72', 'App Exit');\n    },\n}));\n//# sourceMappingURL=D:/DEV/Project/wallpaper-share-wx/App.uvue?vue&type=script&lang.uts.js.map","references":["D:/DEV/Project/wallpaper-share-wx/store/index.uts"],"uniExtApis":["uni.getFileSystemManager","uni.__f__","uni.getStorageSync","uni.setStorageSync"],"map":"{\"version\":3,\"file\":\"App.uvue?vue&type=script&lang.uts.js\",\"sourceRoot\":\"\",\"sources\":[\"App.uvue?vue&type=script&lang.uts\"],\"names\":[],\"mappings\":\";;AACC,OAAO,EAAE,UAAU,EAAE,KAAK,EAAE,gBAAgB,EAAE,MAAM,SAAS,CAAA;AAC7D,OAAO,EAAE,YAAY,EAAE,qBAAwB;AAC/C,OAAO,EAAE,KAAK,EAAE,mBAAsB;AAEtC,IAAI,aAAa,GAAG,CAAC,CAAA;AACrB,MAAM,OAAO,GAAG,GAAG,CAAC,oBAAoB,EAAE,CAAA;AAE1C,iDAAe;IACd,QAAQ,EAAE;;YACT,GAAG,CAAC,KAAK,CAAC,KAAK,EAAC,gBAAgB,EAAC,YAAY,CAAC,CAAA;YAE9C,EAAE,CAAC,aAAa,mBAAC;gBAChB,eAAe,EAAE,IAAI;gBACrB,uCAAuC;gBACvC,KAAK,EAAE,CAAC,iBAAiB,EAAE,eAAe,CAAC;aAC3C,EAAC,CAAA;YAEF,gBAAgB,CAAC,IAAI,CAAC,CAAA;YACtB,UAAU,CAAC,GAAG,GAAG,CAAC,GAAG,CAAC,cAAc,sBAAsB,CAAC,CAAA;YAE3D,KAAK;YACL,IAAI,CAAC,GAAG,CAAC,cAAc,CAAC,OAAO,CAAC,EAAE;gBACjC,MAAM,GAAG,GAAG,MAAM,YAAY,EAAE,CAAC;gBACjC,MAAM,QAAQ,GAAG,MAAM,KAAK,mBAAC,EAAE,IAAI,EAAE,GAAG,CAAC,IAAI,EAAE,EAAC,CAAA;gBAChD,IAAI,QAAQ,CAAC,UAAU,KAAK,GAAG,EAAE;oBAChC,GAAG,CAAC,cAAc,CAAC,OAAO,EAAE,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,CAAA;iBAChD;aACD;YAED,IAAI;gBACH,OAAO,CAAC,SAAS,CAAC,KAAK,CAAC,OAAO,EAAE,IAAI,CAAC,CAAA;aACtC;YAAC,OAAO,GAAG,EAAE;gBACb,GAAG,CAAC,KAAK,CAAC,OAAO,EAAC,gBAAgB,EAAC,aAAa,EAAE,GAAG,CAAC,CAAA;aACtD;YAED,UAAU;YACV,IAAI;gBACH,OAAO,CAAC,SAAS,CAAC,KAAK,CAAC,OAAO,EAAE,KAAK,CAAC,CAAA;gBACvC,GAAG,CAAC,KAAK,CAAC,KAAK,EAAC,gBAAgB,EAAC,WAAW,CAAC,CAAA;aAC7C;YAAC,OAAO,GAAG,EAAE;gBACb,GAAG,CAAC,KAAK,CAAC,OAAO,EAAC,gBAAgB,EAAC,GAAG,CAAC,CAAA;aACvC;oBAAS;gBACT,gBAAgB,CAAC,KAAK,CAAC,CAAA;aACvB;QACF,CAAC;KAAA;IACD,MAAM,EAAE;QACP,GAAG,CAAC,KAAK,CAAC,KAAK,EAAC,gBAAgB,EAAC,UAAU,CAAC,CAAA;IAC7C,CAAC;IACD,MAAM,EAAE;QACP,GAAG,CAAC,KAAK,CAAC,KAAK,EAAC,gBAAgB,EAAC,UAAU,CAAC,CAAA;IAC7C,CAAC;IAmBD,MAAM,EAAE;QACP,GAAG,CAAC,KAAK,CAAC,KAAK,EAAC,gBAAgB,EAAC,UAAU,CAAC,CAAA;IAC7C,CAAC;CACD,GAAA\"}"}
