{"code":"import { __awaiter } from \"tslib\";\nimport { getCurrentInstance, ref } from 'vue';\nimport { debugWarn } from '../../../..//utils';\nexport const useStickySupport = () => {\n    const supportCSSSticky = ref(null);\n    const instance = getCurrentInstance();\n    if (!instance) {\n        debugWarn('TnSticky', '请在 setup 中使用 useStickySupport');\n    }\n    // H5通过创建元素的方法嗅探是否支持 CSS Sticky\n    const checkCSSStickySupportForH5 = () => {\n    };\n    // 在APP和微信小程序上，通过uni.createSelectorQuery嗅探是否支持 CSS Sticky\n    const checkCSSStickySupportForAPPAndMPWX = (selector) => {\n        uni\n            .createSelectorQuery()\n            .in(instance)\n            .select(selector)\n            .fields({\n            computedStyle: ['position'],\n        }, \n        // eslint-disable-next-line @typescript-eslint/no-empty-function\n        () => { })\n            .exec((res) => {\n            if ('sticky' === res[0].position) {\n                supportCSSSticky.value = true;\n            }\n            else {\n                supportCSSSticky.value = false;\n            }\n        });\n    };\n    // 根据机型检测是否支持 CSS Sticky\n    const checkCSSStickySupportForDevice = () => {\n        // 获取手机对应的系统\\操作系统名称和版本\n        const _a = uni.getSystemInfoSync(), platform = _a.platform, system = _a.system;\n        const os = platform.toLowerCase();\n        const osVersion = system;\n        if ((os === 'android' && Number(osVersion.replace('Android', '')) > 8) ||\n            os === 'ios') {\n            supportCSSSticky.value = true;\n        }\n        else {\n            supportCSSSticky.value = false;\n        }\n    };\n    // 检测当前环境是否支持 CSS Sticky\n    const checkCSSStickySupport = (selector) => { return __awaiter(void 0, void 0, void 0, function* () {\n        // 检测H5是否支持 CSS Sticky，主流浏览器都支持\n        // 通过机型去判断是否支持 CSS Sticky\n        if (!supportCSSSticky.value) {\n            checkCSSStickySupportForDevice();\n        }\n        // 通过节点去判断是否支持 CSS Sticky\n        if (!supportCSSSticky.value) {\n            checkCSSStickySupportForAPPAndMPWX(selector);\n        }\n    }); };\n    return {\n        supportCSSSticky,\n        checkCSSStickySupport,\n    };\n};\n//# sourceMappingURL=D:/Development/project/wallpaper-share-wx/uni_modules/tuniaoui-vue3/components/sticky/src/composables/use-sticky-support.js.map","references":["D:/Development/HBuilderX/plugins/uniapp-cli-vite/node_modules/@vue/runtime-core/dist/runtime-core.d.ts","D:/Development/project/wallpaper-share-wx/uni_modules/tuniaoui-vue3/utils/index.ts"],"uniExtApis":[],"map":"{\"version\":3,\"file\":\"use-sticky-support.js\",\"sourceRoot\":\"\",\"sources\":[\"use-sticky-support.ts\"],\"names\":[],\"mappings\":\";AAAA,OAAO,EAAE,kBAAkB,EAAE,GAAG,EAAE,MAAM,KAAK,CAAA;AAC7C,OAAO,EAAE,SAAS,EAAE,MAAM,oBAAoB,CAAA;AAE9C,MAAM,CAAC,MAAM,gBAAgB,GAAG;IAC9B,MAAM,gBAAgB,GAAG,GAAG,CAAiB,IAAI,CAAC,CAAA;IAElD,MAAM,QAAQ,GAAG,kBAAkB,EAAE,CAAA;IACrC,IAAI,CAAC,QAAQ,EAAE;QACb,SAAS,CAAC,UAAU,EAAE,+BAA+B,CAAC,CAAA;KACvD;IAED,+BAA+B;IAC/B,MAAM,0BAA0B,GAAG;IAgBnC,CAAC,CAAA;IAED,yDAAyD;IACzD,MAAM,kCAAkC,GAAG,CAAC,QAAgB;QAE1D,GAAG;aACA,mBAAmB,EAAE;aACrB,EAAE,CAAC,QAAQ,CAAC;aACZ,MAAM,CAAC,QAAQ,CAAC;aAChB,MAAM,CACL;YACE,aAAa,EAAE,CAAC,UAAU,CAAC;SAC5B;QACD,gEAAgE;QAChE,QAAO,CAAC,CACT;aACA,IAAI,CAAC,CAAC,GAAG;YACR,IAAI,QAAQ,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC,QAAQ,EAAE;gBAChC,gBAAgB,CAAC,KAAK,GAAG,IAAI,CAAA;aAC9B;iBAAM;gBACL,gBAAgB,CAAC,KAAK,GAAG,KAAK,CAAA;aAC/B;QACH,CAAC,CAAC,CAAA;IAEN,CAAC,CAAA;IAED,wBAAwB;IACxB,MAAM,8BAA8B,GAAG;QACrC,sBAAsB;QAChB,MAAA,KAAuB,GAAG,CAAC,iBAAiB,EAAE,EAA5C,QAAQ,cAAA,EAAE,MAAM,YAA4B,CAAA;QACpD,MAAM,EAAE,GAAG,QAAQ,CAAC,WAAW,EAAE,CAAA;QACjC,MAAM,SAAS,GAAG,MAAM,CAAA;QACxB,IACE,CAAC,EAAE,KAAK,SAAS,IAAI,MAAM,CAAC,SAAS,CAAC,OAAO,CAAC,SAAS,EAAE,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC;YAClE,EAAE,KAAK,KAAK,EACZ;YACA,gBAAgB,CAAC,KAAK,GAAG,IAAI,CAAA;SAC9B;aAAM;YACL,gBAAgB,CAAC,KAAK,GAAG,KAAK,CAAA;SAC/B;IACH,CAAC,CAAA;IAED,wBAAwB;IACxB,MAAM,qBAAqB,GAAG,CAAO,QAAgB;QACnD,+BAA+B;QAK/B,yBAAyB;QACzB,IAAI,CAAC,gBAAgB,CAAC,KAAK,EAAE;YAC3B,8BAA8B,EAAE,CAAA;SACjC;QAED,yBAAyB;QACzB,IAAI,CAAC,gBAAgB,CAAC,KAAK,EAAE;YAE3B,kCAAkC,CAAC,QAAQ,CAAC,CAAA;SAE7C;IAMH,CAAC,IAAA,CAAA;IAED,OAAO;QACL,gBAAgB;QAChB,qBAAqB;KACtB,CAAA;AACH,CAAC,CAAA\"}"}
